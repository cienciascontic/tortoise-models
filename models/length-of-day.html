



<html>
  <head>
<link rel="stylesheet" type="text/css" href="app.css" charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="app-custom.css" charset="utf-8"/>
  </head>
  <body>
    <div id="model-container"></div>
<script type="text/javascript" src="app.js"></script>
    <script type="text/javascript">
;

      var session =
        (function () {
          var widgets = "[{\"left\":210,\"top\":10,\"right\":622,\"bottom\":443,\"patchSize\":2.0,\"fontSize\":10,\"wrappingAllowedInX\":true,\"wrappingAllowedInY\":true,\"minPxcor\":-100,\"maxPxcor\":100,\"minPycor\":-100,\"maxPycor\":100,\"updateMode\":\"Continuous\",\"showTickCounter\":true,\"tickCounterLabel\":\"ticks\",\"frameRate\":30.0,\"type\":\"view\"},\n{\"compiledSource\":{\"success\":true,\"result\":\"Call(procedures.setup);\"},\"display\":\"Reset\",\"left\":17,\"top\":10,\"right\":82,\"bottom\":43,\"source\":\"setup\",\"forever\":false,\"buttonType\":\"OBSERVER\",\"actionKey\":null,\"type\":\"button\"},\n{\"compiledSource\":{\"success\":true,\"result\":\"Call(procedures.go);\"},\"display\":\"Run\",\"left\":97,\"top\":10,\"right\":160,\"bottom\":43,\"source\":\"go\",\"forever\":true,\"buttonType\":\"OBSERVER\",\"actionKey\":null,\"type\":\"button\"},\n{\"reporter\":function() { return world.observer.getGlobal(\"time\"); },\"compiledSource\":{\"success\":true,\"result\":\"world.observer.getGlobal(\\\"time\\\")\"},\"display\":\"hour\",\"left\":84,\"top\":328,\"right\":134,\"bottom\":373,\"source\":\"time\",\"precision\":0,\"fontSize\":11,\"type\":\"monitor\"},\n{\"compiledSetupCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', undefined)(function() {}); });\\n}\"},\"compiledUpdateCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', undefined)(function() {}); });\\n}\"},\"compiledPens\":[{\"compiledSetupCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', 'daylight')(function() {}); });\\n}\"},\"compiledUpdateCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', 'daylight')(function() {}); });\\n}\"},\"display\":\"daylight\",\"interval\":1.0,\"mode\":0,\"color\":-16777216,\"inLegend\":true,\"setupCode\":\"\",\"updateCode\":\"\",\"type\":\"pen\"},{\"compiledSetupCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', 'max-daylight')(function() {}); });\\n}\"},\"compiledUpdateCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', 'max-daylight')(function() {}); });\\n}\"},\"display\":\"max-daylight\",\"interval\":1.0,\"mode\":0,\"color\":-16777216,\"inLegend\":true,\"setupCode\":\"\",\"updateCode\":\"\",\"type\":\"pen\"}],\"display\":\"Daylight\",\"left\":3,\"top\":129,\"right\":203,\"bottom\":325,\"xAxis\":\"time\",\"yAxis\":\"% light\",\"xmin\":0.0,\"xmax\":400.0,\"ymin\":0.0,\"ymax\":100.0,\"autoPlotOn\":true,\"legendOn\":false,\"setupCode\":\"\",\"updateCode\":\"\",\"pens\":[{\"display\":\"daylight\",\"interval\":1.0,\"mode\":0,\"color\":-16777216,\"inLegend\":true,\"setupCode\":\"\",\"updateCode\":\"\",\"type\":\"pen\"},{\"display\":\"max-daylight\",\"interval\":1.0,\"mode\":0,\"color\":-16777216,\"inLegend\":true,\"setupCode\":\"\",\"updateCode\":\"\",\"type\":\"pen\"}],\"type\":\"plot\"},\n{\"getStep\":function() { return 0.5; },\"getMin\":function() { return -90; },\"getMax\":function() { return 90; },\"compiledMin\":{\"success\":true,\"result\":\"-90\"},\"compiledMax\":{\"success\":true,\"result\":\"90\"},\"compiledStep\":{\"success\":true,\"result\":\"0.5\"},\"display\":\"latitude\",\"left\":17,\"top\":51,\"right\":161,\"bottom\":84,\"varName\":\"latitude\",\"min\":\"-90\",\"max\":\"90\",\"default\":44.0,\"step\":\".5\",\"direction\":\"horizontal\",\"type\":\"slider\"},\n{\"getStep\":function() { return 0.5; },\"getMin\":function() { return -23.5; },\"getMax\":function() { return 23.5; },\"compiledMin\":{\"success\":true,\"result\":\"-23.5\"},\"compiledMax\":{\"success\":true,\"result\":\"23.5\"},\"compiledStep\":{\"success\":true,\"result\":\"0.5\"},\"display\":\"tilt\",\"left\":17,\"top\":90,\"right\":161,\"bottom\":123,\"varName\":\"tilt\",\"min\":\"-23.5\",\"max\":\"23.5\",\"default\":-23.5,\"step\":\".5\",\"direction\":\"horizontal\",\"type\":\"slider\"},\n{\"compiledSource\":{\"success\":true,\"result\":\"world.observer.setGlobal(\\\"opaque-earth?\\\", true);\"},\"display\":\"solid earth\",\"left\":57,\"top\":375,\"right\":162,\"bottom\":408,\"source\":\"set opaque-earth? true\",\"forever\":false,\"buttonType\":\"OBSERVER\",\"actionKey\":null,\"type\":\"button\"},\n{\"compiledSource\":{\"success\":true,\"result\":\"world.observer.setGlobal(\\\"opaque-earth?\\\", false);\"},\"display\":\"transparent earth\",\"left\":55,\"top\":410,\"right\":165,\"bottom\":443,\"source\":\"set opaque-earth? false\",\"forever\":false,\"buttonType\":\"OBSERVER\",\"actionKey\":null,\"type\":\"button\"}]";
          var code    = "globals [earth-radius   theta time   brightness opaque-earth?]\n\nbreed [traveler]\nbreed [sunlight]\ntraveler-own [  disk-shape xo yo ]\n\n\nto startup\n  setup\nend\n\nto setup\n  clear-all\n  ;set tilt 23.5\n  set theta 0\n  set time 18\n    create-earth\n    set opaque-earth? false\n;;  create-sunshine\n  create-traveler 1\n  [ set size 15\n    set color white\n    set pen-size 2\n    ;;set latitude 0\n    set yo (earth-radius * (sin latitude) * (cos tilt))\n    set xo 0 - (earth-radius * (sin latitude) * (sin tilt))  \n    set ycor yo\n    set xcor xo\n    set heading (270 - tilt)\n    pd\n    ]\n  reset-ticks\nend\n\nto create-earth\n  set earth-radius (max-pxcor * .7)\n  crt 1 \n  [set color white\n    set heading 0 - tilt\n    pd\n    fd earth-radius + 10\n    set label \"North\"\n   ]\n  crt 1 \n  [set color white\n    set heading 180 - tilt\n    pd\n    fd earth-radius + 10\n    set label \"South\"\n   ]\n  ask patches\n  [if (distancexy 0 0 < earth-radius)\n    [ifelse pxcor > 0\n      [set pcolor yellow]\n      [set pcolor yellow - 4]\n    ] \n  ]\nend\n\nto create-sunshine\ncreate-sunlight 100\n [setxy max-pxcor  (random (2 * max-pycor) ) \n  set color yellow \n  set heading 270 \n   \n   ]\n\nend\n\n \n\nto go\n     set theta theta + 1\n    set theta theta mod 360\n    set time (theta * 24 / 360 + 18) mod 24\n\n  ask traveler [\n    set xcor xo - earth-radius * (cos latitude) * (sin theta) * (cos tilt)\n    set ycor yo - earth-radius * (cos latitude) * (sin theta) * (sin tilt)  \n    ifelse theta > 90 and theta < 270\n      [ifelse opaque-earth? = true\n        [ht] \n        [st] \n      ]\n      [st]   \n\n    \n ;   ifelse theta < 90 or theta > 270 \n    ;  [ifelse xcor > 0 \n     ;    [\n           \n      ;    set color white\n\n       ; ]\n        ; [\n         ; set color 2\n\n        ;]\n    ;  ]\n      \n     ; [ifelse xcor > 0 \n      ;    [\n            \n       ;    set color white - 2\n\n        ; ]\n         ;[\n  ;        set color black\n\n  ;       ]\n  ;    ]\n  \nset-disk-shape\nset-disk-brightness\n  \n      ]\n  \n  \n  ask sunlight \n    [\n      fd 2\n     if pcolor = yellow\n      [ht]\n     if xcor >  max-pxcor - 4\n      [st]\n    ]\n  do-plots\n  \nend\n\nto set-disk-shape ;;turtle procedure\n  if xcor != 0 [set heading towardsxy 0 0 ]\n  if distancexy 0 0 < earth-radius * .2\n        [set shape \"disk0\"]\n   if distancexy 0 0 > earth-radius * .2\n      and distancexy 0 0 < earth-radius * .38\n        [set shape \"disk1\"]\n   if distancexy 0 0 > earth-radius * .38\n      and distancexy 0 0 < earth-radius * .56\n        [set shape \"disk2\"]\n   if distancexy 0 0 > earth-radius * .56\n      and distancexy 0 0 < earth-radius * .71\n        [set shape \"disk3\"]\n   if distancexy 0 0 > earth-radius * .71\n      and distancexy 0 0 < earth-radius * .83\n        [set shape \"disk4\"]\n   if distancexy 0 0 > earth-radius * .83\n      and distancexy 0 0 < earth-radius * .92\n        [set shape \"disk5\"]\n   if distancexy 0 0 > earth-radius * .92\n      and distancexy 0 0 < earth-radius * .98\n        [set shape \"disk6\"]\n   if distancexy 0 0 > earth-radius * .98\n      and distancexy 0 0 < earth-radius * .99\n        [set shape \"disk7\"]\n   if distancexy 0 0 > earth-radius * .99\n        [set shape \"disk8\"]\nend\n\nto set-disk-brightness  ;;turtle procedure\n  ifelse xcor > 0\n    [set brightness 10 * xcor / earth-radius\n    ]\n    [set brightness 0\n    ] \n    set color black + brightness \nend\n\nto do-plots\nset-current-plot-pen \"daylight\"\nplot  brightness * 10\nset-current-plot-pen \"max-daylight\"\nplot 100\n\n  \n  \nend\n";
          var info    = "## WHAT IS IT?\n\nThis section could give a general understanding of what the model is trying to show or explain.\n\n## HOW IT WORKS\n\nThis section could explain what rules the agents use to create the overall behavior of the model.\n\n## HOW TO USE IT\n\nThis section could explain how to use the model, including a description of each of the items in the interface tab.\n\n## THINGS TO NOTICE\n\nThis section could give some ideas of things for the user to notice while running the model.\n\n## THINGS TO TRY\n\nThis section could give some ideas of things for the user to try to do (move sliders, switches, etc.) with the model.\n\n## EXTENDING THE MODEL\n\nThis section could give some ideas of things to add or change in the procedures tab to make the model more complicated, detailed, accurate, etc.\n\n## NETLOGO FEATURES\n\nThis section could point out any especially interesting or unusual features of NetLogo that the model makes use of, particularly in the Procedures tab.  It might also point out places where workarounds were needed because of missing features.\n\n## RELATED MODELS\n\nThis section could give the names of models in the NetLogo Models Library or elsewhere which are of related interest.\n\n## CREDITS AND REFERENCES\n\nThis section could contain a reference to the model's URL on the web if it has one, as well as any other necessary credits or references.";
          return Tortoise.fromCompiledModel('#model-container', widgets, code, info, '', true);
        })();
      var AgentModel = tortoise_require('agentmodel');
var Call = tortoise_require('util/call');
var ColorModel = tortoise_require('engine/core/colormodel');
var Dump = tortoise_require('engine/dump');
var Exception = tortoise_require('util/exception');
var Link = tortoise_require('engine/core/link');
var LinkSet = tortoise_require('engine/core/linkset');
var Meta = tortoise_require('meta');
var NLMath = tortoise_require('util/nlmath');
var NLType = tortoise_require('engine/core/typechecker');
var Nobody = tortoise_require('engine/core/nobody');
var PatchSet = tortoise_require('engine/core/patchset');
var PenBundle = tortoise_require('engine/plot/pen');
var Plot = tortoise_require('engine/plot/plot');
var PlotOps = tortoise_require('engine/plot/plotops');
var Random = tortoise_require('shim/random');
var StrictMath = tortoise_require('shim/strictmath');
var Tasks = tortoise_require('engine/prim/tasks');
var Turtle = tortoise_require('engine/core/turtle');
var TurtleSet = tortoise_require('engine/core/turtleset');
var notImplemented = tortoise_require('util/notimplemented');
var modelConfig = (typeof window.modelConfig !== "undefined" && window.modelConfig !== null) ? window.modelConfig : {};
var modelPlotOps = (typeof modelConfig.plotOps !== "undefined" && modelConfig.plotOps !== null) ? modelConfig.plotOps : {};
if (typeof javax !== "undefined") {
  modelConfig.output = {
    clear: function() {},
    write: function(str) { context.getWriter().print(str); }
  }
}
modelConfig.plots = [(function() {
  var name    = 'Daylight';
  var plotOps = (typeof modelPlotOps[name] !== "undefined" && modelPlotOps[name] !== null) ? modelPlotOps[name] : new PlotOps(function() {}, function() {}, function() {}, function() { return function() {}; }, function() { return function() {}; }, function() { return function() {}; }, function() { return function() {}; });
  var pens    = [new PenBundle.Pen('daylight', plotOps.makePenOps, false, new PenBundle.State(0.0, 1.0, PenBundle.DisplayMode.Line), function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', 'daylight')(function() {}); });
  }, function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', 'daylight')(function() {}); });
  }),
  new PenBundle.Pen('max-daylight', plotOps.makePenOps, false, new PenBundle.State(0.0, 1.0, PenBundle.DisplayMode.Line), function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', 'max-daylight')(function() {}); });
  }, function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', 'max-daylight')(function() {}); });
  })];
  var setup   = function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', undefined)(function() {}); });
  };
  var update  = function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Daylight', undefined)(function() {}); });
  };
  return new Plot(name, pens, plotOps, "time", "% light", false, 0.0, 400.0, 0.0, 100.0, setup, update);
})()];
var workspace = tortoise_require('engine/workspace')(modelConfig)([{ name: "TRAVELER", singular: "turtle", varNames: ["disk-shape", "xo", "yo"] }, { name: "SUNLIGHT", singular: "turtle", varNames: [] }])([], [])(["latitude", "tilt", "earth-radius", "theta", "time", "brightness", "opaque-earth?"], ["latitude", "tilt"], [], -100, 100, -100, 100, 2.0, true, true, {"default":{"rotate":true,"elements":[{"xcors":[150,40,150,260],"ycors":[5,250,205,250],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"airplane":{"rotate":true,"elements":[{"xcors":[150,135,120,120,15,15,120,135,105,120,150,180,210,165,180,285,285,180,180,165],"ycors":[0,15,60,105,165,195,180,240,270,285,270,285,270,240,180,195,165,105,60,15],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"arrow":{"rotate":true,"elements":[{"xcors":[150,0,105,105,195,195,300],"ycors":[0,150,150,293,293,150,150],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"box":{"rotate":false,"elements":[{"xcors":[150,285,285,150],"ycors":[285,225,75,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,15,150,285],"ycors":[135,75,15,75],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[15,15,150,150],"ycors":[75,225,285,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":150,"y1":285,"x2":150,"y2":135,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":135,"x2":15,"y2":75,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":135,"x2":285,"y2":75,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"bug":{"rotate":true,"elements":[{"x":96,"y":182,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":110,"y":127,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":110,"y":75,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":150,"y1":100,"x2":80,"y2":30,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":100,"x2":220,"y2":30,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"butterfly":{"rotate":true,"elements":[{"xcors":[150,209,225,225,195,165,150],"ycors":[165,199,225,255,270,255,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,89,75,75,105,135,150],"ycors":[165,198,225,255,270,255,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[139,100,55,25,10,10,25,40,85,139],"ycors":[148,105,90,90,105,135,180,195,194,163],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[162,200,245,275,290,290,275,260,215,162],"ycors":[150,105,90,90,105,135,180,195,195,165],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,135,120,135,150,165,180,165],"ycors":[255,225,150,120,105,120,150,225],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":135,"y":90,"diam":30,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x1":150,"y1":105,"x2":195,"y2":60,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":105,"x2":105,"y2":60,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"car":{"rotate":false,"elements":[{"xcors":[300,279,261,240,226,213,203,185,159,135,75,0,0,0,300,300],"ycors":[180,164,144,135,132,106,84,63,50,50,60,150,165,225,225,180],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":180,"y":180,"diam":90,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":30,"y":180,"diam":90,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[162,132,134,209,194,189,180],"ycors":[80,78,135,135,105,96,89],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":47,"y":195,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":195,"y":195,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"circle":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"circle 2":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"cow":{"rotate":false,"elements":[{"xcors":[200,197,179,177,166,140,93,78,72,49,48,37,25,25,45,103,179,198,252,272,293,285,255,242,224],"ycors":[193,249,249,196,187,189,191,179,211,209,181,149,120,89,72,84,75,76,64,81,103,121,121,118,167],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[73,86,62,48],"ycors":[210,251,249,208],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[25,16,9,23,25,39],"ycors":[114,195,204,213,200,123],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"cylinder":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk":{"rotate":false,"elements":[]},"disk0":{"rotate":true,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk1":{"rotate":true,"elements":[{"xcors":[299,281,218,148,85,42,16,0,21,74,150,226,278,298],"ycors":[150,78,21,5,26,55,95,150,217,272,294,269,221,150],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk2":{"rotate":true,"elements":[{"xcors":[299,281,229,150,93,45,16,0,25,75,149,225,274,298],"ycors":[149,80,32,13,29,59,94,149,216,266,288,269,219,149],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk3":{"rotate":true,"elements":[{"xcors":[298,272,225,149,95,54,19,-1,26,80,149,220,275,297],"ycors":[149,88,42,27,40,63,100,149,209,253,273,258,205,149],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk4":{"rotate":true,"elements":[{"xcors":[302,287,229,149,101,62,15,3,23,77,151,232,289,301],"ycors":[149,111,59,45,49,69,109,149,190,235,256,234,184,149],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk5":{"rotate":true,"elements":[{"xcors":[298,283,228,146,90,49,15,-1,21,69,146,239,284,297],"ycors":[149,111,85,70,77,93,120,149,183,213,230,205,174,149],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk6":{"rotate":true,"elements":[{"xcors":[298,290,247,150,86,55,13,-1,16,68,149,230,287,297],"ycors":[147,127,104,92,98,106,123,147,167,190,204,189,167,147],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk7":{"rotate":true,"elements":[{"xcors":[298,287,246,150,94,50,15,-1,15,64,150,250,285,297],"ycors":[147,135,124,120,123,124,132,147,163,176,180,171,161,147],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"disk8":{"rotate":true,"elements":[{"xcors":[-2,10,57,152,202,246,282,297,276,217,152,76,30,11],"ycors":[151,157,157,160,162,160,160,150,146,149,144,144,147,147],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"dot":{"rotate":false,"elements":[{"x":90,"y":90,"diam":120,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"face happy":{"rotate":false,"elements":[{"x":8,"y":8,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[150,90,62,47,67,90,109,150,192,210,227,251,236,212],"ycors":[255,239,213,191,179,203,218,225,218,203,181,194,217,240],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"face neutral":{"rotate":false,"elements":[{"x":8,"y":7,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xmin":60,"ymin":195,"xmax":240,"ymax":225,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"face sad":{"rotate":false,"elements":[{"x":8,"y":8,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[150,90,62,47,67,90,109,150,192,210,227,251,236,212],"ycors":[168,184,210,232,244,220,205,198,205,220,242,229,206,183],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"fish":{"rotate":false,"elements":[{"xcors":[44,21,15,0,15,0,13,20,45],"ycors":[131,87,86,120,150,180,214,212,166],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[135,119,95,76,46,60],"ycors":[195,235,218,210,204,165],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[75,83,71,86,166,135],"ycors":[45,77,103,114,78,60],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[30,151,226,280,292,292,287,270,195,151,30],"ycors":[136,77,81,119,146,160,170,195,210,212,166],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":215,"y":106,"diam":30,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"flag":{"rotate":false,"elements":[{"xmin":60,"ymin":15,"xmax":75,"ymax":300,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[90,270,90],"ycors":[150,90,30],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":75,"y1":135,"x2":90,"y2":135,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":75,"y1":45,"x2":90,"y2":45,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"flower":{"rotate":false,"elements":[{"xcors":[135,165,180,180,150,165,195,195,165],"ycors":[120,165,210,240,300,300,240,195,135],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"x":85,"y":132,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":130,"y":147,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":192,"y":85,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":85,"y":40,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":177,"y":40,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":177,"y":132,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":70,"y":85,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":130,"y":25,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":96,"y":51,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":113,"y":68,"diam":74,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[189,219,249,279,234],"ycors":[233,188,173,188,218],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[180,150,105,75,135],"ycors":[255,210,210,240,240],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false}]},"house":{"rotate":false,"elements":[{"xmin":45,"ymin":120,"xmax":255,"ymax":285,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":210,"xmax":180,"ymax":285,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[15,150,285],"ycors":[120,15,120],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":30,"y1":120,"x2":270,"y2":120,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"leaf":{"rotate":false,"elements":[{"xcors":[150,135,120,60,30,60,60,15,30,15,40,45,60,90,105,120,105,120,135,150,165,180,195,180,195,210,240,255,263,285,270,285,240,240,270,240,180,165],"ycors":[210,195,210,210,195,180,165,135,120,105,104,90,90,105,120,120,60,60,30,15,30,60,60,120,120,105,90,90,104,105,120,135,165,180,195,210,210,195],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,135,120,105,105,135,165,165],"ycors":[195,240,255,255,285,285,240,195],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"line":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":300,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"line half":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":150,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"pentagon":{"rotate":false,"elements":[{"xcors":[150,15,60,240,285],"ycors":[15,120,285,285,120],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"person":{"rotate":false,"elements":[{"x":110,"y":5,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[105,120,90,105,135,150,165,195,210,180,195],"ycors":[90,195,285,300,300,225,300,300,285,195,90],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":127,"ymin":79,"xmax":172,"ymax":94,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[195,240,225,165],"ycors":[90,150,180,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[105,60,75,135],"ycors":[90,150,180,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"plant":{"rotate":false,"elements":[{"xmin":135,"ymin":90,"xmax":165,"ymax":300,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[255,210,195,255,285],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,210,255,225,165],"ycors":[255,210,195,255,285],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[180,135,120,180,210],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,165,225,255,210],"ycors":[180,210,180,120,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[105,60,45,105,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,165,225,255,210],"ycors":[105,135,105,45,60],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,120,150,180,165],"ycors":[90,45,15,45,90],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"sheep":{"rotate":false,"elements":[{"xmin":151,"ymin":225,"xmax":180,"ymax":285,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":47,"ymin":225,"xmax":75,"ymax":285,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":15,"ymin":75,"xmax":210,"ymax":225,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":135,"y":75,"diam":150,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":165,"y":76,"diam":116,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"square":{"rotate":false,"elements":[{"xmin":30,"ymin":30,"xmax":270,"ymax":270,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"square 2":{"rotate":false,"elements":[{"xmin":30,"ymin":30,"xmax":270,"ymax":270,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":60,"ymin":60,"xmax":240,"ymax":240,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"star":{"rotate":false,"elements":[{"xcors":[151,185,298,207,242,151,59,94,3,116],"ycors":[1,108,108,175,282,216,282,175,108,108],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"target":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":60,"y":60,"diam":180,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":90,"y":90,"diam":120,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":120,"y":120,"diam":60,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"tree":{"rotate":false,"elements":[{"x":118,"y":3,"diam":94,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":195,"xmax":180,"ymax":300,"type":"rectangle","color":"rgba(157, 110, 72, 1.0)","filled":true,"marked":false},{"x":65,"y":21,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":116,"y":41,"diam":127,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":45,"y":90,"diam":120,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":104,"y":74,"diam":152,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"triangle":{"rotate":false,"elements":[{"xcors":[150,15,285],"ycors":[30,255,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"triangle 2":{"rotate":false,"elements":[{"xcors":[150,15,285],"ycors":[30,255,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[151,225,75],"ycors":[99,223,224],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"truck":{"rotate":false,"elements":[{"xmin":4,"ymin":45,"xmax":195,"ymax":187,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[296,296,259,244,208,207],"ycors":[193,150,134,104,104,194],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":195,"ymin":60,"xmax":195,"ymax":105,"type":"rectangle","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[238,252,219,218],"ycors":[112,141,141,112],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":234,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xmin":181,"ymin":185,"xmax":214,"ymax":194,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":144,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":24,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":24,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":144,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":234,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"turtle":{"rotate":true,"elements":[{"xcors":[215,240,246,228,215,193],"ycors":[204,233,254,266,252,210],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[195,225,245,260,269,261,240,225,210],"ycors":[90,75,75,89,108,124,105,105,105],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[105,75,55,40,31,39,60,75,90],"ycors":[90,75,75,89,108,124,105,105,105],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[132,134,107,108,150,192,192,169,172],"ycors":[85,64,51,17,2,18,52,65,87],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[85,60,54,72,85,107],"ycors":[204,233,254,266,252,210],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[119,179,209,224,220,175,128,81,74,88],"ycors":[75,75,101,135,225,261,261,224,135,99],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"wheel":{"rotate":false,"elements":[{"x":3,"y":3,"diam":294,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x1":150,"y1":285,"x2":150,"y2":15,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":15,"y1":150,"x2":285,"y2":150,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":120,"y":120,"diam":60,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":216,"y1":40,"x2":79,"y2":269,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":40,"y1":84,"x2":269,"y2":221,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":40,"y1":216,"x2":269,"y2":79,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":84,"y1":40,"x2":221,"y2":269,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"x":{"rotate":false,"elements":[{"xcors":[270,225,30,75],"ycors":[75,30,225,270],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[30,75,270,225],"ycors":[75,30,225,270],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]}}, {"default":{"direction-indicator":{"rotate":true,"elements":[{"x1":150,"y1":150,"x2":90,"y2":180,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":150,"x2":210,"y2":180,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"curviness":0.0,"lines":[{"x-offset":-0.2,"is-visible":false,"dash-pattern":[0.0,1.0]},{"x-offset":0.0,"is-visible":true,"dash-pattern":[1.0,0.0]},{"x-offset":0.2,"is-visible":false,"dash-pattern":[0.0,1.0]}]}}, function(){});
var BreedManager = workspace.breedManager;
var LayoutManager = workspace.layoutManager;
var LinkPrims = workspace.linkPrims;
var ListPrims = workspace.listPrims;
var MousePrims = workspace.mousePrims;
var OutputPrims = workspace.outputPrims;
var Prims = workspace.prims;
var PrintPrims = workspace.printPrims;
var SelfManager = workspace.selfManager;
var SelfPrims = workspace.selfPrims;
var Updater = workspace.updater;
var plotManager = workspace.plotManager;
var world = workspace.world;
var procedures = (function() {
  var startup = function() { Call(procedures.setup); };
  var setup = function() {
    world.clearAll();
    world.observer.setGlobal("theta", 0);
    world.observer.setGlobal("time", 18);
    Call(procedures.createEarth);
    world.observer.setGlobal("opaque-earth?", false);
    world.turtleManager.createTurtles(1, "TRAVELER").ask(function() {
      SelfPrims.setVariable("size", 15);
      SelfPrims.setVariable("color", 9.9);
      SelfPrims.setVariable("pen-size", 2);
      SelfPrims.setVariable("yo", ((world.observer.getGlobal("earth-radius") * NLMath.sin(world.observer.getGlobal("latitude"))) * NLMath.cos(world.observer.getGlobal("tilt"))));
      SelfPrims.setVariable("xo", (0 - ((world.observer.getGlobal("earth-radius") * NLMath.sin(world.observer.getGlobal("latitude"))) * NLMath.sin(world.observer.getGlobal("tilt")))));
      SelfPrims.setVariable("ycor", SelfPrims.getVariable("yo"));
      SelfPrims.setVariable("xcor", SelfPrims.getVariable("xo"));
      SelfPrims.setVariable("heading", (270 - world.observer.getGlobal("tilt")));
      SelfManager.self().penManager.lowerPen();
    }, true);
    world.ticker.reset();
  };
  var createEarth = function() {
    world.observer.setGlobal("earth-radius", (world.topology.maxPxcor * 0.7));
    world.turtleManager.createTurtles(1, "").ask(function() {
      SelfPrims.setVariable("color", 9.9);
      SelfPrims.setVariable("heading", (0 - world.observer.getGlobal("tilt")));
      SelfManager.self().penManager.lowerPen();
      SelfPrims.fd((world.observer.getGlobal("earth-radius") + 10));
      SelfPrims.setVariable("label", "North");
    }, true);
    world.turtleManager.createTurtles(1, "").ask(function() {
      SelfPrims.setVariable("color", 9.9);
      SelfPrims.setVariable("heading", (180 - world.observer.getGlobal("tilt")));
      SelfManager.self().penManager.lowerPen();
      SelfPrims.fd((world.observer.getGlobal("earth-radius") + 10));
      SelfPrims.setVariable("label", "South");
    }, true);
    world.patches().ask(function() {
      if (Prims.lt(SelfManager.self().distanceXY(0, 0), world.observer.getGlobal("earth-radius"))) {
        if (Prims.gt(SelfPrims.getPatchVariable("pxcor"), 0)) {
          SelfPrims.setPatchVariable("pcolor", 45);
        }
        else {
          SelfPrims.setPatchVariable("pcolor", (45 - 4));
        }
      }
    }, true);
  };
  var createSunshine = function() {
    world.turtleManager.createTurtles(100, "SUNLIGHT").ask(function() {
      SelfPrims.setXY(world.topology.maxPxcor, Prims.random((2 * world.topology.maxPycor)));
      SelfPrims.setVariable("color", 45);
      SelfPrims.setVariable("heading", 270);
    }, true);
  };
  var go = function() {
    world.observer.setGlobal("theta", (world.observer.getGlobal("theta") + 1));
    world.observer.setGlobal("theta", NLMath.mod(world.observer.getGlobal("theta"), 360));
    world.observer.setGlobal("time", NLMath.mod((((world.observer.getGlobal("theta") * 24) / 360) + 18), 24));
    world.turtleManager.turtlesOfBreed("TRAVELER").ask(function() {
      SelfPrims.setVariable("xcor", (SelfPrims.getVariable("xo") - (((world.observer.getGlobal("earth-radius") * NLMath.cos(world.observer.getGlobal("latitude"))) * NLMath.sin(world.observer.getGlobal("theta"))) * NLMath.cos(world.observer.getGlobal("tilt")))));
      SelfPrims.setVariable("ycor", (SelfPrims.getVariable("yo") - (((world.observer.getGlobal("earth-radius") * NLMath.cos(world.observer.getGlobal("latitude"))) * NLMath.sin(world.observer.getGlobal("theta"))) * NLMath.sin(world.observer.getGlobal("tilt")))));
      if ((Prims.gt(world.observer.getGlobal("theta"), 90) && Prims.lt(world.observer.getGlobal("theta"), 270))) {
        if (Prims.equality(world.observer.getGlobal("opaque-earth?"), true)) {
          SelfManager.self().hideTurtle(true);;
        }
        else {
          SelfManager.self().hideTurtle(false);;
        }
      }
      else {
        SelfManager.self().hideTurtle(false);;
      }
      Call(procedures.setDiskShape);
      Call(procedures.setDiskBrightness);
    }, true);
    world.turtleManager.turtlesOfBreed("SUNLIGHT").ask(function() {
      SelfPrims.fd(2);
      if (Prims.equality(SelfPrims.getPatchVariable("pcolor"), 45)) {
        SelfManager.self().hideTurtle(true);;
      }
      if (Prims.gt(SelfPrims.getVariable("xcor"), (world.topology.maxPxcor - 4))) {
        SelfManager.self().hideTurtle(false);;
      }
    }, true);
    Call(procedures.doPlots);
  };
  var setDiskShape = function() {
    if (!Prims.equality(SelfPrims.getVariable("xcor"), 0)) {
      SelfPrims.setVariable("heading", SelfManager.self().towardsXY(0, 0));
    }
    if (Prims.lt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.2))) {
      SelfPrims.setVariable("shape", "disk0");
    }
    if ((Prims.gt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.2)) && Prims.lt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.38)))) {
      SelfPrims.setVariable("shape", "disk1");
    }
    if ((Prims.gt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.38)) && Prims.lt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.56)))) {
      SelfPrims.setVariable("shape", "disk2");
    }
    if ((Prims.gt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.56)) && Prims.lt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.71)))) {
      SelfPrims.setVariable("shape", "disk3");
    }
    if ((Prims.gt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.71)) && Prims.lt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.83)))) {
      SelfPrims.setVariable("shape", "disk4");
    }
    if ((Prims.gt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.83)) && Prims.lt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.92)))) {
      SelfPrims.setVariable("shape", "disk5");
    }
    if ((Prims.gt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.92)) && Prims.lt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.98)))) {
      SelfPrims.setVariable("shape", "disk6");
    }
    if ((Prims.gt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.98)) && Prims.lt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.99)))) {
      SelfPrims.setVariable("shape", "disk7");
    }
    if (Prims.gt(SelfManager.self().distanceXY(0, 0), (world.observer.getGlobal("earth-radius") * 0.99))) {
      SelfPrims.setVariable("shape", "disk8");
    }
  };
  var setDiskBrightness = function() {
    if (Prims.gt(SelfPrims.getVariable("xcor"), 0)) {
      world.observer.setGlobal("brightness", ((10 * SelfPrims.getVariable("xcor")) / world.observer.getGlobal("earth-radius")));
    }
    else {
      world.observer.setGlobal("brightness", 0);
    }
    SelfPrims.setVariable("color", (0 + world.observer.getGlobal("brightness")));
  };
  var doPlots = function() {
    plotManager.setCurrentPen("daylight");
    plotManager.plotValue((world.observer.getGlobal("brightness") * 10));
    plotManager.setCurrentPen("max-daylight");
    plotManager.plotValue(100);
  };
  return {
    "CREATE-EARTH":createEarth,
    "CREATE-SUNSHINE":createSunshine,
    "DO-PLOTS":doPlots,
    "GO":go,
    "SET-DISK-BRIGHTNESS":setDiskBrightness,
    "SET-DISK-SHAPE":setDiskShape,
    "SETUP":setup,
    "STARTUP":startup,
    "createEarth":createEarth,
    "createSunshine":createSunshine,
    "doPlots":doPlots,
    "go":go,
    "setDiskBrightness":setDiskBrightness,
    "setDiskShape":setDiskShape,
    "setup":setup,
    "startup":startup
  };
})();
world.observer.setGlobal("latitude", 44);
world.observer.setGlobal("tilt", -23.5);

      session.startLoop()
    </script>
<script src='jquery-1.11.3.min.js' type='text/javascript'></script>
<script src='shutterbug-0.5.4.js' type='text/javascript'></script>
<script>
  Shutterbug.enable('body');
</script>
  </body>
</html>
