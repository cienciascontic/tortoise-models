



<html>
  <head>
<link rel="stylesheet" type="text/css" href="app.css" charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="app-custom.css" charset="utf-8"/>
  </head>
  <body>
    <div id="model-container"></div>
<script type="text/javascript" src="app.js"></script>
    <script type="text/javascript">
;

      var session =
        (function () {
          var widgets = "[{\"left\":294,\"top\":10,\"right\":655,\"bottom\":392,\"patchSize\":18.5,\"fontSize\":12,\"wrappingAllowedInX\":true,\"wrappingAllowedInY\":true,\"minPxcor\":-9,\"maxPxcor\":9,\"minPycor\":-9,\"maxPycor\":9,\"updateMode\":\"Continuous\",\"showTickCounter\":true,\"tickCounterLabel\":\"ticks\",\"frameRate\":30.0,\"type\":\"view\"},\n{\"compiledSource\":{\"success\":true,\"result\":\"Call(procedures.setup);\"},\"left\":12,\"top\":10,\"right\":78,\"bottom\":43,\"source\":\"setup\",\"forever\":false,\"buttonType\":\"OBSERVER\",\"actionKey\":null,\"type\":\"button\"},\n{\"compiledSource\":{\"success\":true,\"result\":\"Call(procedures.go);\"},\"display\":\"go/stop\",\"left\":121,\"top\":11,\"right\":203,\"bottom\":44,\"source\":\"go\",\"forever\":true,\"buttonType\":\"OBSERVER\",\"actionKey\":null,\"type\":\"button\"},\n{\"reporter\":function() { return world.observer.getGlobal(\"time\"); },\"compiledSource\":{\"success\":true,\"result\":\"world.observer.getGlobal(\\\"time\\\")\"},\"left\":17,\"top\":99,\"right\":74,\"bottom\":144,\"source\":\"time\",\"precision\":3,\"fontSize\":11,\"type\":\"monitor\"},\n{\"getStep\":function() { return 0.01; },\"getMin\":function() { return 0; },\"getMax\":function() { return 1; },\"compiledMin\":{\"success\":true,\"result\":\"0\"},\"compiledMax\":{\"success\":true,\"result\":\"1\"},\"compiledStep\":{\"success\":true,\"result\":\"0.01\"},\"display\":\"conductivity\",\"left\":13,\"top\":54,\"right\":207,\"bottom\":87,\"varName\":\"conductivity\",\"min\":\"0\",\"max\":\"1\",\"default\":0.4,\"step\":\"0.01\",\"direction\":\"horizontal\",\"type\":\"slider\"},\n{\"reporter\":function() { return world.observer.getGlobal(\"patch-temp\"); },\"compiledSource\":{\"success\":true,\"result\":\"world.observer.getGlobal(\\\"patch-temp\\\")\"},\"left\":119,\"top\":100,\"right\":205,\"bottom\":145,\"source\":\"patch-temp\",\"precision\":3,\"fontSize\":11,\"type\":\"monitor\"},\n{\"display\":\"temperature of the patch at the position of the cursor\",\"left\":119,\"top\":150,\"right\":271,\"bottom\":192,\"fontSize\":11,\"color\":0.0,\"transparent\":false,\"type\":\"textBox\"},\n{\"display\":null,\"left\":192,\"top\":261,\"right\":283,\"bottom\":387,\"fontSize\":11,\"color\":0.0,\"transparent\":false,\"type\":\"textBox\"},\n{\"display\":\"Red line: temperature of the square next to the heater. \\nBlue bar: temperature wherever the cursor is placed.\",\"left\":55,\"top\":374,\"right\":254,\"bottom\":432,\"fontSize\":11,\"color\":15.0,\"transparent\":true,\"type\":\"textBox\"},\n{\"compiledSetupCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', undefined)(function() {}); });\\n}\"},\"compiledUpdateCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', undefined)(function() {}); });\\n}\"},\"compiledPens\":[{\"compiledSetupCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', 'next to heater')(function() {}); });\\n}\"},\"compiledUpdateCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', 'next to heater')(function() {}); });\\n}\"},\"display\":\"next to heater\",\"interval\":1.0,\"mode\":0,\"color\":-2674135,\"inLegend\":true,\"setupCode\":\"\",\"updateCode\":\"\",\"type\":\"pen\"},{\"compiledSetupCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', 'at cursor')(function() {}); });\\n}\"},\"compiledUpdateCode\":{\"success\":true,\"result\":\"function() {\\n  workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', 'at cursor')(function() {}); });\\n}\"},\"display\":\"at cursor\",\"interval\":1.0,\"mode\":0,\"color\":-16777216,\"inLegend\":true,\"setupCode\":\"\",\"updateCode\":\"\",\"type\":\"pen\"}],\"display\":\"Plate Temperatures\",\"left\":14,\"top\":183,\"right\":284,\"bottom\":367,\"xAxis\":null,\"yAxis\":null,\"xmin\":0.0,\"xmax\":10.0,\"ymin\":0.0,\"ymax\":10.0,\"autoPlotOn\":true,\"legendOn\":false,\"setupCode\":\"\",\"updateCode\":\"\",\"pens\":[{\"display\":\"next to heater\",\"interval\":1.0,\"mode\":0,\"color\":-2674135,\"inLegend\":true,\"setupCode\":\"\",\"updateCode\":\"\",\"type\":\"pen\"},{\"display\":\"at cursor\",\"interval\":1.0,\"mode\":0,\"color\":-16777216,\"inLegend\":true,\"setupCode\":\"\",\"updateCode\":\"\",\"type\":\"pen\"}],\"type\":\"plot\"}]";
          var code    = "patches-own [old-temp     temp saturation   ]\n\nturtles-own [finger-temp]\n\nglobals  [ plate-size  time patch-temp ]\n\nto startup\nsetup\nend \n\nto setup\nca\nset plate-size 8\n\nask patches [\n  set time 0\n  set temp 0\nset old-temp temp\n color-patches\n  ]\n  \n;;crt 1  ;;create a \"heater\" to supply heat to one patch\nask patch -8 0 [\n  set plabel \"heater\"\n  set plabel-color blue\n  ]\nask patch -9 0 [set pcolor red]\n\n;;ask turtles\n ;; [set finger-temp 100\n  ;; set shape \"circle\"\n   ;;set size 0.8\n   ;;setxy  -9 0\n   ;;set color black\n   ;;set label \"heater\"\n   ;;set label-color white\n   ;;]\n\nend\n\n\n\nto go\n;; set the patch under the heater to the heater temperature\n;;set [old-temp] of patch -9 0 100 \nask patch -9 0 [set old-temp 100]\n;;each patch gets heat from its 4 neighbors, getting more if thermal conductivity is larger\nask patches [\nset temp (  (old-temp * (1 - conductivity)) + (conductivity * (sum [old-temp] of neighbors4 / 4))   )\nset old-temp temp\ninsulate-edges\ncolor-patches\n]\nset time time + 1\n\nset-current-plot-pen \"next to heater\"\n  plot [temp] of patch -8 0\n  set patch-temp [temp] of patch mouse-xcor mouse-ycor\nset-current-plot-pen \"at cursor\"\n  plot patch-temp\n;;  plot [temp] of patch mouse-xcor mouse-ycor\nend\n\nto color-patches ;; a patch procedure -- scales patches to temperature, sets perimeter to black\nifelse abs pxcor <= plate-size  and abs pycor <= plate-size or (pxcor = -9 and pycor = 0 )\n    [set pcolor scale-color red temp 100 0\n     if pcolor < 11 [set pcolor 11]\n     ]\n    [set pcolor black]\nend\n\nto insulate-edges  ;; a patch procedure -- sets edges to be the same as their neighbors on the plate\nif pxcor = 9 and abs pycor < 9 \n  [set old-temp [temp] of patch-at -1 0]\nif pxcor = -9 and abs pycor < 9 and pycor != 0\n  [set old-temp [temp] of patch-at 1 0]\nif abs pxcor < 9  and pycor = 9 \n  [set old-temp [temp] of patch-at 0 -1]\nif abs pxcor < 9 and  pycor = -9 \n  [set old-temp [temp] of patch-at 0  1]\n    \n;;adjust the black patches around the finger\nif pxcor = -9 and  pycor = 0\n  [set temp 100]  \n ;; [set old-temp [temp] of patch-at 1 0]\nif pxcor = -9 and  pycor = 1 \n  [set old-temp [temp] of patch-at 0 -1]\nif pxcor = -9 and  pycor = -1 \n  [set old-temp [temp] of patch-at 0 1]\n  \n\nend";
          var info    = "WHAT IS IT?\n-----------\nThis section could give a general understanding of what the model is trying to show or explain.\n\n\nHOW IT WORKS\n------------\nThis section could explain what rules the agents use to create the overall behavior of the model.\n\n\nHOW TO USE IT\n-------------\nThis section could explain how to use the model, including a description of each of the items in the interface tab.\n\n\nTHINGS TO NOTICE\n----------------\nThis section could give some ideas of things for the user to notice while running the model.\n\n\nTHINGS TO TRY\n-------------\nThis section could give some ideas of things for the user to try to do (move sliders, switches, etc.) with the model.\n\n\nEXTENDING THE MODEL\n-------------------\nThis section could give some ideas of things to add or change in the procedures tab to make the model more complicated, detailed, accurate, etc.\n\n\nNETLOGO FEATURES\n----------------\nThis section could point out any especially interesting or unusual features of NetLogo that the model makes use of, particularly in the Procedures tab.  It might also point out places where workarounds were needed because of missing features.\n\n\nRELATED MODELS\n--------------\nThis section could give the names of models in the NetLogo Models Library or elsewhere which are of related interest.\n\n\nCREDITS AND REFERENCES\n----------------------\nThis section could contain a reference to the model's URL on the web if it has one, as well as any other necessary credits or references.";
          return Tortoise.fromCompiledModel('#model-container', widgets, code, info, '', true);
        })();
      var AgentModel = tortoise_require('agentmodel');
var Call = tortoise_require('util/call');
var ColorModel = tortoise_require('engine/core/colormodel');
var Dump = tortoise_require('engine/dump');
var Exception = tortoise_require('util/exception');
var Link = tortoise_require('engine/core/link');
var LinkSet = tortoise_require('engine/core/linkset');
var Meta = tortoise_require('meta');
var NLMath = tortoise_require('util/nlmath');
var NLType = tortoise_require('engine/core/typechecker');
var Nobody = tortoise_require('engine/core/nobody');
var PatchSet = tortoise_require('engine/core/patchset');
var PenBundle = tortoise_require('engine/plot/pen');
var Plot = tortoise_require('engine/plot/plot');
var PlotOps = tortoise_require('engine/plot/plotops');
var Random = tortoise_require('shim/random');
var StrictMath = tortoise_require('shim/strictmath');
var Tasks = tortoise_require('engine/prim/tasks');
var Turtle = tortoise_require('engine/core/turtle');
var TurtleSet = tortoise_require('engine/core/turtleset');
var notImplemented = tortoise_require('util/notimplemented');
var modelConfig = (typeof window.modelConfig !== "undefined" && window.modelConfig !== null) ? window.modelConfig : {};
var modelPlotOps = (typeof modelConfig.plotOps !== "undefined" && modelConfig.plotOps !== null) ? modelConfig.plotOps : {};
if (typeof javax !== "undefined") {
  modelConfig.output = {
    clear: function() {},
    write: function(str) { context.getWriter().print(str); }
  }
}
modelConfig.plots = [(function() {
  var name    = 'Plate Temperatures';
  var plotOps = (typeof modelPlotOps[name] !== "undefined" && modelPlotOps[name] !== null) ? modelPlotOps[name] : new PlotOps(function() {}, function() {}, function() {}, function() { return function() {}; }, function() { return function() {}; }, function() { return function() {}; }, function() { return function() {}; });
  var pens    = [new PenBundle.Pen('next to heater', plotOps.makePenOps, false, new PenBundle.State(15.0, 1.0, PenBundle.DisplayMode.Line), function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', 'next to heater')(function() {}); });
  }, function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', 'next to heater')(function() {}); });
  }),
  new PenBundle.Pen('at cursor', plotOps.makePenOps, false, new PenBundle.State(0.0, 1.0, PenBundle.DisplayMode.Line), function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', 'at cursor')(function() {}); });
  }, function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', 'at cursor')(function() {}); });
  })];
  var setup   = function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', undefined)(function() {}); });
  };
  var update  = function() {
    workspace.rng.withAux(function() { plotManager.withTemporaryContext('Plate Temperatures', undefined)(function() {}); });
  };
  return new Plot(name, pens, plotOps, "", "", false, 0.0, 10.0, 0.0, 10.0, setup, update);
})()];
var workspace = tortoise_require('engine/workspace')(modelConfig)([])(["finger-temp"], [])(["conductivity", "plate-size", "time", "patch-temp"], ["conductivity"], ["old-temp", "temp", "saturation"], -9, 9, -9, 9, 18.5, true, true, {"default":{"rotate":true,"elements":[{"xcors":[150,40,150,260],"ycors":[5,250,205,250],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"airplane":{"rotate":true,"elements":[{"xcors":[150,135,120,120,15,15,120,135,105,120,150,180,210,165,180,285,285,180,180,165],"ycors":[0,15,60,105,165,195,180,240,270,285,270,285,270,240,180,195,165,105,60,15],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"arrow":{"rotate":true,"elements":[{"xcors":[150,0,105,105,195,195,300],"ycors":[0,150,150,293,293,150,150],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"box":{"rotate":false,"elements":[{"xcors":[150,285,285,150],"ycors":[285,225,75,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,15,150,285],"ycors":[135,75,15,75],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[15,15,150,150],"ycors":[75,225,285,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":150,"y1":285,"x2":150,"y2":135,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":135,"x2":15,"y2":75,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":135,"x2":285,"y2":75,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"bug":{"rotate":true,"elements":[{"x":96,"y":182,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":110,"y":127,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":110,"y":75,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":150,"y1":100,"x2":80,"y2":30,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":100,"x2":220,"y2":30,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"butterfly":{"rotate":true,"elements":[{"xcors":[150,209,225,225,195,165,150],"ycors":[165,199,225,255,270,255,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,89,75,75,105,135,150],"ycors":[165,198,225,255,270,255,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[139,100,55,25,10,10,25,40,85,139],"ycors":[148,105,90,90,105,135,180,195,194,163],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[162,200,245,275,290,290,275,260,215,162],"ycors":[150,105,90,90,105,135,180,195,195,165],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,135,120,135,150,165,180,165],"ycors":[255,225,150,120,105,120,150,225],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":135,"y":90,"diam":30,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x1":150,"y1":105,"x2":195,"y2":60,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":105,"x2":105,"y2":60,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"car":{"rotate":false,"elements":[{"xcors":[300,279,261,240,226,213,203,185,159,135,75,0,0,0,300,300],"ycors":[180,164,144,135,132,106,84,63,50,50,60,150,165,225,225,180],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":180,"y":180,"diam":90,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":30,"y":180,"diam":90,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[162,132,134,209,194,189,180],"ycors":[80,78,135,135,105,96,89],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":47,"y":195,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":195,"y":195,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"circle":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"circle 2":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"cow":{"rotate":false,"elements":[{"xcors":[200,197,179,177,166,140,93,78,72,49,48,37,25,25,45,103,179,198,252,272,293,285,255,242,224],"ycors":[193,249,249,196,187,189,191,179,211,209,181,149,120,89,72,84,75,76,64,81,103,121,121,118,167],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[73,86,62,48],"ycors":[210,251,249,208],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[25,16,9,23,25,39],"ycors":[114,195,204,213,200,123],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"cylinder":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"dot":{"rotate":false,"elements":[{"x":90,"y":90,"diam":120,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"face happy":{"rotate":false,"elements":[{"x":8,"y":8,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[150,90,62,47,67,90,109,150,192,210,227,251,236,212],"ycors":[255,239,213,191,179,203,218,225,218,203,181,194,217,240],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"face neutral":{"rotate":false,"elements":[{"x":8,"y":7,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xmin":60,"ymin":195,"xmax":240,"ymax":225,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"face sad":{"rotate":false,"elements":[{"x":8,"y":8,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[150,90,62,47,67,90,109,150,192,210,227,251,236,212],"ycors":[168,184,210,232,244,220,205,198,205,220,242,229,206,183],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"fish":{"rotate":false,"elements":[{"xcors":[44,21,15,0,15,0,13,20,45],"ycors":[131,87,86,120,150,180,214,212,166],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[135,119,95,76,46,60],"ycors":[195,235,218,210,204,165],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[75,83,71,86,166,135],"ycors":[45,77,103,114,78,60],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[30,151,226,280,292,292,287,270,195,151,30],"ycors":[136,77,81,119,146,160,170,195,210,212,166],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":215,"y":106,"diam":30,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"flag":{"rotate":false,"elements":[{"xmin":60,"ymin":15,"xmax":75,"ymax":300,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[90,270,90],"ycors":[150,90,30],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":75,"y1":135,"x2":90,"y2":135,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":75,"y1":45,"x2":90,"y2":45,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"flower":{"rotate":false,"elements":[{"xcors":[135,165,180,180,150,165,195,195,165],"ycors":[120,165,210,240,300,300,240,195,135],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"x":85,"y":132,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":130,"y":147,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":192,"y":85,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":85,"y":40,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":177,"y":40,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":177,"y":132,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":70,"y":85,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":130,"y":25,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":96,"y":51,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":113,"y":68,"diam":74,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[189,219,249,279,234],"ycors":[233,188,173,188,218],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[180,150,105,75,135],"ycors":[255,210,210,240,240],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false}]},"house":{"rotate":false,"elements":[{"xmin":45,"ymin":120,"xmax":255,"ymax":285,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":210,"xmax":180,"ymax":285,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[15,150,285],"ycors":[120,15,120],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":30,"y1":120,"x2":270,"y2":120,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"leaf":{"rotate":false,"elements":[{"xcors":[150,135,120,60,30,60,60,15,30,15,40,45,60,90,105,120,105,120,135,150,165,180,195,180,195,210,240,255,263,285,270,285,240,240,270,240,180,165],"ycors":[210,195,210,210,195,180,165,135,120,105,104,90,90,105,120,120,60,60,30,15,30,60,60,120,120,105,90,90,104,105,120,135,165,180,195,210,210,195],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,135,120,105,105,135,165,165],"ycors":[195,240,255,255,285,285,240,195],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"line":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":300,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"line half":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":150,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"link":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":300,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"link direction":{"rotate":true,"elements":[{"x1":150,"y1":150,"x2":30,"y2":225,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":150,"x2":270,"y2":225,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"pentagon":{"rotate":false,"elements":[{"xcors":[150,15,60,240,285],"ycors":[15,120,285,285,120],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"person":{"rotate":false,"elements":[{"x":110,"y":5,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[105,120,90,105,135,150,165,195,210,180,195],"ycors":[90,195,285,300,300,225,300,300,285,195,90],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":127,"ymin":79,"xmax":172,"ymax":94,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[195,240,225,165],"ycors":[90,150,180,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[105,60,75,135],"ycors":[90,150,180,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"plant":{"rotate":false,"elements":[{"xmin":135,"ymin":90,"xmax":165,"ymax":300,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[255,210,195,255,285],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,210,255,225,165],"ycors":[255,210,195,255,285],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[180,135,120,180,210],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,165,225,255,210],"ycors":[180,210,180,120,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[105,60,45,105,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,165,225,255,210],"ycors":[105,135,105,45,60],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,120,150,180,165],"ycors":[90,45,15,45,90],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"square":{"rotate":false,"elements":[{"xmin":30,"ymin":30,"xmax":270,"ymax":270,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"square 2":{"rotate":false,"elements":[{"xmin":30,"ymin":30,"xmax":270,"ymax":270,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":60,"ymin":60,"xmax":240,"ymax":240,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"star":{"rotate":false,"elements":[{"xcors":[151,185,298,207,242,151,59,94,3,116],"ycors":[1,108,108,175,282,216,282,175,108,108],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"target":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":60,"y":60,"diam":180,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":90,"y":90,"diam":120,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":120,"y":120,"diam":60,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"tree":{"rotate":false,"elements":[{"x":118,"y":3,"diam":94,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":195,"xmax":180,"ymax":300,"type":"rectangle","color":"rgba(157, 110, 72, 1.0)","filled":true,"marked":false},{"x":65,"y":21,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":116,"y":41,"diam":127,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":45,"y":90,"diam":120,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":104,"y":74,"diam":152,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"triangle":{"rotate":false,"elements":[{"xcors":[150,15,285],"ycors":[30,255,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"triangle 2":{"rotate":false,"elements":[{"xcors":[150,15,285],"ycors":[30,255,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[151,225,75],"ycors":[99,223,224],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"truck":{"rotate":false,"elements":[{"xmin":4,"ymin":45,"xmax":195,"ymax":187,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[296,296,259,244,208,207],"ycors":[193,150,134,104,104,194],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":195,"ymin":60,"xmax":195,"ymax":105,"type":"rectangle","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[238,252,219,218],"ycors":[112,141,141,112],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":234,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xmin":181,"ymin":185,"xmax":214,"ymax":194,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":144,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":24,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":24,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":144,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":234,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"turtle":{"rotate":true,"elements":[{"xcors":[215,240,246,228,215,193],"ycors":[204,233,254,266,252,210],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[195,225,245,260,269,261,240,225,210],"ycors":[90,75,75,89,108,124,105,105,105],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[105,75,55,40,31,39,60,75,90],"ycors":[90,75,75,89,108,124,105,105,105],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[132,134,107,108,150,192,192,169,172],"ycors":[85,64,51,17,2,18,52,65,87],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[85,60,54,72,85,107],"ycors":[204,233,254,266,252,210],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[119,179,209,224,220,175,128,81,74,88],"ycors":[75,75,101,135,225,261,261,224,135,99],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"wheel":{"rotate":false,"elements":[{"x":3,"y":3,"diam":294,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x1":150,"y1":285,"x2":150,"y2":15,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":15,"y1":150,"x2":285,"y2":150,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":120,"y":120,"diam":60,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":216,"y1":40,"x2":79,"y2":269,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":40,"y1":84,"x2":269,"y2":221,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":40,"y1":216,"x2":269,"y2":79,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":84,"y1":40,"x2":221,"y2":269,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"x":{"rotate":false,"elements":[{"xcors":[270,225,30,75],"ycors":[75,30,225,270],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[30,75,270,225],"ycors":[75,30,225,270],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]}}, {"default":{"direction-indicator":{"rotate":true,"elements":[{"x1":150,"y1":150,"x2":90,"y2":180,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":150,"x2":210,"y2":180,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"curviness":0.0,"lines":[{"x-offset":-0.2,"is-visible":false,"dash-pattern":[0.0,1.0]},{"x-offset":0.0,"is-visible":true,"dash-pattern":[1.0,0.0]},{"x-offset":0.2,"is-visible":false,"dash-pattern":[0.0,1.0]}]}}, function(){});
var BreedManager = workspace.breedManager;
var LayoutManager = workspace.layoutManager;
var LinkPrims = workspace.linkPrims;
var ListPrims = workspace.listPrims;
var MousePrims = workspace.mousePrims;
var OutputPrims = workspace.outputPrims;
var Prims = workspace.prims;
var PrintPrims = workspace.printPrims;
var SelfManager = workspace.selfManager;
var SelfPrims = workspace.selfPrims;
var Updater = workspace.updater;
var plotManager = workspace.plotManager;
var world = workspace.world;
var procedures = (function() {
  var startup = function() { Call(procedures.setup); };
  var setup = function() {
    world.clearAll();
    world.observer.setGlobal("plate-size", 8);
    world.patches().ask(function() {
      world.observer.setGlobal("time", 0);
      SelfPrims.setPatchVariable("temp", 0);
      SelfPrims.setPatchVariable("old-temp", SelfPrims.getPatchVariable("temp"));
      Call(procedures.colorPatches);
    }, true);
    world.getPatchAt(-8, 0).ask(function() {
      SelfPrims.setPatchVariable("plabel", "heater");
      SelfPrims.setPatchVariable("plabel-color", 105);
    }, true);
    world.getPatchAt(-9, 0).ask(function() { SelfPrims.setPatchVariable("pcolor", 15); }, true);
  };
  var go = function() {
    world.getPatchAt(-9, 0).ask(function() { SelfPrims.setPatchVariable("old-temp", 100); }, true);
    world.patches().ask(function() {
      SelfPrims.setPatchVariable("temp", ((SelfPrims.getPatchVariable("old-temp") * (1 - world.observer.getGlobal("conductivity"))) + (world.observer.getGlobal("conductivity") * (ListPrims.sum(SelfPrims.getNeighbors4().projectionBy(function() { return SelfPrims.getPatchVariable("old-temp"); })) / 4))));
      SelfPrims.setPatchVariable("old-temp", SelfPrims.getPatchVariable("temp"));
      Call(procedures.insulateEdges);
      Call(procedures.colorPatches);
    }, true);
    world.observer.setGlobal("time", (world.observer.getGlobal("time") + 1));
    plotManager.setCurrentPen("next to heater");
    plotManager.plotValue(world.getPatchAt(-8, 0).projectionBy(function() { return SelfPrims.getPatchVariable("temp"); }));
    world.observer.setGlobal("patch-temp", world.getPatchAt(MousePrims.getX(), MousePrims.getY()).projectionBy(function() { return SelfPrims.getPatchVariable("temp"); }));
    plotManager.setCurrentPen("at cursor");
    plotManager.plotValue(world.observer.getGlobal("patch-temp"));
  };
  var colorPatches = function() {
    if (((Prims.lte(NLMath.abs(SelfPrims.getPatchVariable("pxcor")), world.observer.getGlobal("plate-size")) && Prims.lte(NLMath.abs(SelfPrims.getPatchVariable("pycor")), world.observer.getGlobal("plate-size"))) || (Prims.equality(SelfPrims.getPatchVariable("pxcor"), -9) && Prims.equality(SelfPrims.getPatchVariable("pycor"), 0)))) {
      SelfPrims.setPatchVariable("pcolor", ColorModel.scaleColor(15, SelfPrims.getPatchVariable("temp"), 100, 0));
      if (Prims.lt(SelfPrims.getPatchVariable("pcolor"), 11)) {
        SelfPrims.setPatchVariable("pcolor", 11);
      }
    }
    else {
      SelfPrims.setPatchVariable("pcolor", 0);
    }
  };
  var insulateEdges = function() {
    if ((Prims.equality(SelfPrims.getPatchVariable("pxcor"), 9) && Prims.lt(NLMath.abs(SelfPrims.getPatchVariable("pycor")), 9))) {
      SelfPrims.setPatchVariable("old-temp", SelfManager.self().patchAt(-1, 0).projectionBy(function() { return SelfPrims.getPatchVariable("temp"); }));
    }
    if (((Prims.equality(SelfPrims.getPatchVariable("pxcor"), -9) && Prims.lt(NLMath.abs(SelfPrims.getPatchVariable("pycor")), 9)) && !Prims.equality(SelfPrims.getPatchVariable("pycor"), 0))) {
      SelfPrims.setPatchVariable("old-temp", SelfManager.self().patchAt(1, 0).projectionBy(function() { return SelfPrims.getPatchVariable("temp"); }));
    }
    if ((Prims.lt(NLMath.abs(SelfPrims.getPatchVariable("pxcor")), 9) && Prims.equality(SelfPrims.getPatchVariable("pycor"), 9))) {
      SelfPrims.setPatchVariable("old-temp", SelfManager.self().patchAt(0, -1).projectionBy(function() { return SelfPrims.getPatchVariable("temp"); }));
    }
    if ((Prims.lt(NLMath.abs(SelfPrims.getPatchVariable("pxcor")), 9) && Prims.equality(SelfPrims.getPatchVariable("pycor"), -9))) {
      SelfPrims.setPatchVariable("old-temp", SelfManager.self().patchAt(0, 1).projectionBy(function() { return SelfPrims.getPatchVariable("temp"); }));
    }
    if ((Prims.equality(SelfPrims.getPatchVariable("pxcor"), -9) && Prims.equality(SelfPrims.getPatchVariable("pycor"), 0))) {
      SelfPrims.setPatchVariable("temp", 100);
    }
    if ((Prims.equality(SelfPrims.getPatchVariable("pxcor"), -9) && Prims.equality(SelfPrims.getPatchVariable("pycor"), 1))) {
      SelfPrims.setPatchVariable("old-temp", SelfManager.self().patchAt(0, -1).projectionBy(function() { return SelfPrims.getPatchVariable("temp"); }));
    }
    if ((Prims.equality(SelfPrims.getPatchVariable("pxcor"), -9) && Prims.equality(SelfPrims.getPatchVariable("pycor"), -1))) {
      SelfPrims.setPatchVariable("old-temp", SelfManager.self().patchAt(0, 1).projectionBy(function() { return SelfPrims.getPatchVariable("temp"); }));
    }
  };
  return {
    "COLOR-PATCHES":colorPatches,
    "GO":go,
    "INSULATE-EDGES":insulateEdges,
    "SETUP":setup,
    "STARTUP":startup,
    "colorPatches":colorPatches,
    "go":go,
    "insulateEdges":insulateEdges,
    "setup":setup,
    "startup":startup
  };
})();
world.observer.setGlobal("conductivity", 0.4);

window.startup = procedures.startup;
      session.startLoop()
    </script>
<script src='jquery-1.11.3.min.js' type='text/javascript'></script>
<script src='shutterbug-0.5.4.js' type='text/javascript'></script>
<script>
  Shutterbug.enable('body');
</script>
  </body>
</html>
