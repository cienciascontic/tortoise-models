
<!-- saved from url=(0050)http://li425-91.members.linode.com:9000/save-nlogo -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="app.css" charset="utf-8"/>
  </head>
  <body data-feedly-mini="yes">
    <div id="model-container"><div class="netlogo-model" style="width: 817;"><div class="netlogo-header"><label class="netlogo-widget netlogo-speed-slider"><span class="netlogo-label">speed</span> <input type="range" min="-1" max="1" step="0.01"></label> <div class="netlogo-powered-by"><a href="http://ccl.northwestern.edu/netlogo/"><img style="vertical-align: middle;" alt="NetLogo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAANcSURBVHjarJRdaFxFFMd/M/dj7252uxubKms+bGprVyIVbNMWWqkQqtLUSpQWfSiV+oVFTcE3DeiDgvoiUSiCYLH2oVoLtQ+iaaIWWtE2FKGkkSrkq5svN+sm7ma/7p3x4W42lEbjQw8MM8yc87/nzPnNFVprbqWJXyMyXuMqx1Ni6N3ny3cX8tOHNLoBUMvESoFI2Xbs4zeO1lzREpSrMSNS1zkBDv6uo1/noz1H7mpvS4SjprAl2AZYEqzKbEowBAgBAkjPKX2599JjT7R0bj412D0JYNplPSBD1G2SmR/e6u1ikEHG2vYiGxoJmxAyIGSCI8GpCItKimtvl2JtfGujDNkX6epuAhCjNeAZxM1ocPy2Qh4toGQ5DLU+ysiuA2S3P0KgJkjAgEAlQylAA64CG/jlUk6//ng4cNWmLK0yOPNMnG99Rs9LQINVKrD+wmke7upg55PrWP3eYcwrlykpKCkoelDy/HVegQhoABNAepbACwjOt72gZkJhypX70YDWEEklue+rbnYc2MiGp1upPfYReiJJUUG58gFXu4udch1wHcjFIgy0HyIjb2yvBpT2F6t+6+f+D15lW8c9JDo7iPSdgVIRLUqL2AyHDQAOf9hfbqxvMF98eT3RuTS1avHyl+Stcphe2chP9+4k/t3RbXVl3W+Ws17FY56/w3VcbO/koS/eZLoAqrQMxADZMTYOfwpwoWjL4+bCYcgssMqGOzPD6CIkZ/3SxTJ0ayFIN6/BnBrZb2XdE1JUgkJWkfrUNRJnPyc16zsbgPyXIUJBpvc+y89nk/S8/4nek3NPGeBWMwzGvhUPnP6RubRLwfODlqqx3LSCyee2MnlwMwA2RwgO5qouVcHmksUdJweYyi8hZkrUjgT5t/ejNq0jBsSqNWsKyT9uFtxw7Bs585d3g46KOeT2bWHmtd14KyP+5mzqpsYU3OyioACMhGiqPTMocsrHId9cy9BLDzKxq8X3ctMwlV6yKSHL4fr4dd0DeQBTBUgUkvpE1kVPbqkX117ZzuSaFf4zyfz5n9A4lk0yNU7vyb7jTy1kmFGipejKvh6h9n0W995ZPTu227hqmCz33xXgFV1v9NzI96NfjndWt7XWCB/7BSICFWL+j3lAofpCtfYFb6X9MwCJZ07mUsXRGwAAAABJRU5ErkJggg=="> <span style="font-size: 16px;">powered by NetLogo</span></a></div></div> <div style="position: relative; width: 817; height: 446" class="netlogo-widget-container"><div class="netlogo-widget netlogo-view-container" style="position: absolute; left: 402px; top: 10px; width: 415px; height: 436px;"><div class="netlogo-widget netlogo-tick-counter">ticks: <span></span></div><div class="view-layers" style="width: 100%; position: relative;"><canvas width="810" height="810" class="patch-view" style="width: 100%; z-index: 0;"></canvas><canvas width="1215" height="1215" class="turtle-view" style="width: 100%; position: absolute; top: 0px; left: 0px; z-index: 1;"></canvas><canvas width="405" height="405" class="spotlight-view" style="width: 100%; position: absolute; top: 0px; left: 0px; z-index: 2;"></canvas></div></div>            <button class="netlogo-widget netlogo-button netlogo-command" type="button" style="position: absolute; left: 21px; top: 10px; width: 66px; height: 33px;"><span>setup</span></button>          <label class="netlogo-widget netlogo-button netlogo-forever-button  netlogo-command" style="position: absolute; left: 98px; top: 10px; width: 82px; height: 33px;"><input type="checkbox"> <span class="netlogo-label">go/stop</span></label>          <label class="netlogo-widget netlogo-slider netlogo-input" style="position: absolute; left: 222px; top: 12px; width: 137px; height: 33px;"><input type="range" max="100" min="0" step="1"> <span class="netlogo-label">Initial_Population</span> <span class="netlogo-value"><input type="number" min="0" max="100" step="1"> </span></label>         <label class="netlogo-widget netlogo-slider netlogo-input" style="position: absolute; left: 20px; top: 56px; width: 152px; height: 33px;"><input type="range" max="100" min="0" step="1"> <span class="netlogo-label">Life_Span</span> <span class="netlogo-value"><input type="number" min="0" max="100" step="1"> ticks</span></label>         <label class="netlogo-widget netlogo-slider netlogo-input" style="position: absolute; left: 20px; top: 98px; width: 153px; height: 33px;"><input type="range" max="50" min="0" step="1"> <span class="netlogo-label">Reproduction_Rate</span> <span class="netlogo-value"><input type="number" min="0" max="50" step="1"> %</span></label>         <label class="netlogo-widget netlogo-slider netlogo-input" style="position: absolute; left: 220px; top: 97px; width: 176px; height: 33px;"><input type="range" max="25" min="0" step="1"> <span class="netlogo-label">Food_Conversion</span> <span class="netlogo-value"><input type="number" min="0" max="25" step="1"> mm/cal</span></label>         <label class="netlogo-widget netlogo-slider netlogo-input" style="position: absolute; left: 220px; top: 57px; width: 172px; height: 33px;"><input type="range" max="10" min="2" step="1"> <span class="netlogo-label">Energy_Reserve</span> <span class="netlogo-value"><input type="number" min="2" max="10" step="1"> cal</span></label>         <label class="netlogo-widget netlogo-slider netlogo-input" style="position: absolute; left: 219px; top: 137px; width: 172px; height: 33px;"><input type="range" max="10" min="0" step="1"> <span class="netlogo-label">Growth_Rate</span> <span class="netlogo-value"><input type="number" min="0" max="10" step="1"> mm/tick</span></label>             <div class="netlogo-widget netlogo-plot netlogo-plot-0 netlogo-output" style="position: absolute; left: 13px; top: 229px; width: 375px; height: 214px;" data-highcharts-chart="6"><div class="highcharts-container" id="highcharts-22" style="position: relative; overflow: hidden; width: 375px; height: 214px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><svg version="1.1" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Arial, Helvetica, sans-serif;font-size:12px;" xmlns="http://www.w3.org/2000/svg" width="375" height="214"><desc>Created with Highcharts 4.0.4</desc><defs><clippath id="highcharts-23"><rect x="0" y="0" width="298" height="98"></rect></clippath></defs><rect x="0" y="0" width="375" height="214" strokeWidth="0" fill="#FFFFFF" class=" highcharts-background"></rect><g class="highcharts-button" style="cursor:default;" stroke-linecap="round" transform="translate(341,10)"><title>Chart context menu</title><rect x="0.5" y="0.5" width="24" height="22" strokeWidth="1" fill="white" stroke="none" stroke-width="1" rx="2" ry="2"></rect><path fill="#E0E0E0" d="M 6 6.5 L 20 6.5 M 6 11.5 L 20 11.5 M 6 16.5 L 20 16.5" stroke="#666" stroke-width="3" zIndex="1"></path><text x="0" zIndex="1" style="color:black;fill:black;" y="13"></text></g><g class="highcharts-grid" zIndex="1"></g><g class="highcharts-grid" zIndex="1"><path fill="none" d="M 67 52.5 L 365 52.5" stroke="#C0C0C0" stroke-width="1" zIndex="1" opacity="1"></path><path fill="none" d="M 67 102.5 L 365 102.5" stroke="#C0C0C0" stroke-width="1" zIndex="1" opacity="1"></path><path fill="none" d="M 67 151.5 L 365 151.5" stroke="#C0C0C0" stroke-width="1" zIndex="1" opacity="1"></path></g><g class="highcharts-axis" zIndex="2"><path fill="none" d="M 141.5 151 L 141.5 161" stroke="#C0D0E0" stroke-width="1" opacity="1"></path><path fill="none" d="M 215.5 151 L 215.5 161" stroke="#C0D0E0" stroke-width="1" opacity="1"></path><path fill="none" d="M 290.5 151 L 290.5 161" stroke="#C0D0E0" stroke-width="1" opacity="1"></path><path fill="none" d="M 365.5 151 L 365.5 161" stroke="#C0D0E0" stroke-width="1" opacity="1"></path><path fill="none" d="M 66.5 151 L 66.5 161" stroke="#C0D0E0" stroke-width="1" opacity="1"></path><text x="216" zIndex="7" text-anchor="middle" transform="translate(0,0)" class=" highcharts-xaxis-title" style="color:#707070;fill:#707070;" visibility="visible" y="193">ticks</text><path fill="none" d="M 67 151.5 L 365 151.5" stroke="#C0D0E0" stroke-width="1" zIndex="7" visibility="visible"></path></g><g class="highcharts-axis" zIndex="2"><text x="28.0625" zIndex="7" text-anchor="middle" transform="translate(0,0) rotate(270 28.0625 102)" class=" highcharts-yaxis-title" style="color:#707070;fill:#707070;" visibility="visible" y="102">population</text></g><g class="highcharts-series-group" zIndex="3"><g class="highcharts-series" visibility="visible" zIndex="0.1" transform="translate(67,53) scale(1 1)" clip-path="url(#highcharts-23)"><path fill="none" d="M 0 0" stroke-linejoin="round" visibility="visible" stroke="rgba(192,192,192,0.0001)" stroke-width="22" zIndex="2" class=" highcharts-tracker" style=""></path></g><g class="highcharts-markers highcharts-tracker" visibility="visible" zIndex="0.1" transform="translate(67,53) scale(1 1)" clip-path="none" style=""></g></g><text x="188" text-anchor="middle" class="highcharts-title" zIndex="4" style="color:#333333;font-size:18px;fill:#333333;width:311px;" y="25"><tspan>population vs. time</tspan></text><g class="highcharts-axis-labels highcharts-xaxis-labels" zIndex="7"><text x="67" text-anchor="middle" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" y="171" opacity="1">0</text><text x="141.5" text-anchor="middle" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" y="171" opacity="1">2.5</text><text x="216" text-anchor="middle" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" y="171" opacity="1">5</text><text x="290.5" text-anchor="middle" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" y="171" opacity="1">7.5</text><text x="365" text-anchor="middle" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" y="171" opacity="1">10</text></g><g class="highcharts-axis-labels highcharts-yaxis-labels" zIndex="7"><text x="52" text-anchor="end" style="width:104px;color:#606060;cursor:default;font-size:11px;fill:#606060;" y="154.5" opacity="1">0</text><text x="52" text-anchor="end" style="width:104px;color:#606060;cursor:default;font-size:11px;fill:#606060;" y="105.5" opacity="1">5</text><text x="52" text-anchor="end" style="width:104px;color:#606060;cursor:default;font-size:11px;fill:#606060;" y="56.5" opacity="1">10</text></g><g class="highcharts-tooltip" zIndex="8" style="cursor:default;padding:0;white-space:nowrap;" transform="translate(0,-9999)"><path fill="none" d="M 3 0 L 13 0 C 16 0 16 0 16 3 L 16 13 C 16 16 16 16 13 16 L 3 16 C 0 16 0 16 0 13 L 0 3 C 0 0 0 0 3 0" isShadow="true" stroke="black" stroke-opacity="0.049999999999999996" stroke-width="5" transform="translate(1, 1)"></path><path fill="none" d="M 3 0 L 13 0 C 16 0 16 0 16 3 L 16 13 C 16 16 16 16 13 16 L 3 16 C 0 16 0 16 0 13 L 0 3 C 0 0 0 0 3 0" isShadow="true" stroke="black" stroke-opacity="0.09999999999999999" stroke-width="3" transform="translate(1, 1)"></path><path fill="none" d="M 3 0 L 13 0 C 16 0 16 0 16 3 L 16 13 C 16 16 16 16 13 16 L 3 16 C 0 16 0 16 0 13 L 0 3 C 0 0 0 0 3 0" isShadow="true" stroke="black" stroke-opacity="0.15" stroke-width="1" transform="translate(1, 1)"></path><path fill="rgba(249, 249, 249, .85)" d="M 3 0 L 13 0 C 16 0 16 0 16 3 L 16 13 C 16 16 16 16 13 16 L 3 16 C 0 16 0 16 0 13 L 0 3 C 0 0 0 0 3 0"></path><text x="8" zIndex="1" style="font-size:12px;color:#333333;fill:#333333;" y="21"></text></g></svg></div></div> <pre class="netlogo-widget netlogo-text-box" style="position: absolute; left: 12px; top: 182px; width: 377px; height: 67px;">Reproduction rate = fraction of population reproducing per tick (given enough food).  Food Conversion = length of grass needed to generate one "calorie".  Growth rate = length of grass growth per tick.</pre>        </div> <div class="netlogo-tabs"><label class="netlogo-code-tab netlogo-tab netlogo-command "><input type="checkbox"> NetLogo Code</label> <label class="netlogo-info-tab netlogo-tab netlogo-command "><input type="checkbox"> Model Info</label></div> <div class="netlogo-model-text"> </div></div></div>
    <script type="text/string" id="nlogo-code">;attributes of the simulation
breed [ worm ]

patches-own [grass]
turtles-own [life energy]
globals [
MAX_POPULATION       ;the maximum population of worms allowable (setting above 10000 is not recommended!)
MAX_GRASS_HEIGHT     ;max height of grass
]

to startup
setup
end


;get things ready
to setup
  set MAX_POPULATION 10000
  set MAX_GRASS_HEIGHT 50
  ct
  clear-plot
  clear-patches
  set-current-plot "population vs. time"

  create-worm Initial_Population   ;initial population of worms
  ask worm 
  	[getready set life Life_Span set energy Energy_Reserve]
  ask patches 
	  [set grass Food_Conversion]   ;start out with enough grass to eat
end

;time-tick events:  1. grow grass (then color it)  2. worms live  3. update plot
to time-tick

  ask patches 
      [set grass (grass + Growth_Rate)
 	     if grass > MAX_GRASS_HEIGHT [set grass MAX_GRASS_HEIGHT]]
  ask patches 
	    [set pcolor scale-color green grass 0 (MAX_GRASS_HEIGHT * 2)]

  ask worm [live]

  plot count turtles

  if count turtles > MAX_POPULATION [stop]
  ;quit when population max reached
end

;worm procedures:

to live

  crawl
  
  eat

  metabolize
    
  reproduce

end


to getready
  set shape "worm"
  setxy random(world-width) random(world-height)
  set heading random(360)
end

;we make several arbitrary assumptions:  life capacity decreases at an even rate, life is somewhat extended by the
; presence of ample food, and living requires 1/2 "calorie" per tick.  of course any of these assumptions may be modified.
to metabolize
   set life (life - 1)
   ; extend lifespan when energy reserve is at the maximum
   if energy = Energy_Reserve [set life (life + .5)]
   set energy (energy - .5)
   if (life < 0 or energy < 0) [die]
end

;reproduction here is asexual budding -- on average, Reproduction_Rate times per 100 ticks
to reproduce
  if Reproduction_Rate > random(100) 
    [ if (energy > Energy_Reserve / 2)
      ;we start new offspring with a limited energy supply (taken from the parent) so that starvation is not imminent
	    [hatch 1 [set life Life_Span set heading random(360) set energy energy / 2] 
       set energy energy / 2]
    ]
end

;the worm motion is quite arbitrary; these values were picked to produce quasi-realistic motion
to crawl
  rt random 20 
  lt random 20
  forward ((random 2) + (random 2))
end

;the Food_Conversion variable specifies what length of "grass" in a square must be eaten to produce 1 calorie for the worm
to eat
  let grasshere [grass] of patch-at 0 0
  if (grasshere > Food_Conversion and energy < Energy_Reserve) 
     [set energy (energy + 1) 
      ask patch-at 0 0 [set grass (grasshere - Food_Conversion)]
      ]
end</script>
    <script type="text/string" id="nlogo-info">WHAT IS IT?
-----------

The Worm simulation is a model of a population of virtual "worms".  The model explores the relationship between individual behavior and population dynamics.  It can easily stand alone, but it was developed as an enrichment activity following several weeks of a standard mealworm biology lab.  It is suitable both for an introduction to population dynamics, and as an introduction to agent-based modeling in biology.  Although quite simple, the simulation can produce complex dynamics that could be suitable for discussion up through a high school level.


HOW IT WORKS
------------

The simulation consists of essentially just two elements, a field of "grass" which is the food source of the worms, and the worms themselves.  We measure the grass in terms of its "length", which is recorded in the _grass_ variable owned by patches.  The grass also grows at a rate defined by the Growth_Rate slider, with length going from zero (black patch color) up to a maximum defined by the MAX_GRASS_HEIGHT constant (bright green patch color).  The worms own _life_ and _energy_ attributes.  Energy derives from food consumed, while life (lifespan) acts as a counter limiting the amount of time the worm has left to live.  In each tick, worms 1. crawl, 2. eat, 3. metabolize and 4. reproduce.

1.  crawl - this is essentially random motion forward and within 20 degrees to the left or right
2.  eat - worms eat any grass available in their square in each tick, cropping a length defined by the Food_Conversion slider (if that much is available - otherwise the worm does not eat); this then increases the worm's _energy_ variable by 1 unit (a "calorie"), up to the maximum defined by the Energy_Reserve slider.
3.  metabolize - the worms' _life_ counter is decremented, as well as the _energy_ counter (by 1/2 a calorie); when there is abundant food, a worm's lifespan is doubled.  Either old age or starvation may kill a worm.
4.  reproduce - every worm that has at least half of its maximum energy (defined by Energy_Reserve) has a chance of asexually reproducing a single offspring given by Reproduction_Rate.  When food is abundant, the reproduction rate essentially gives the per-tick growth rate of the worm population (not accounting for death of old worms).

The interaction of resource-dependent population growth with resource limitations gives rise to surprisingly complex population dynamics.  At the beginning, unbounded exponential growth is observed.  As the worm population approaches the environment's carrying capacity, growth saturates and, depending on the rate of grass regrowth and the maximum energy reserve per worm, the population may experience a mass die-off due to starvation.  In this case, eventually the population rebounds and after several oscillations will stabilize at some intermediate value.  Otherwise, the population simply levels off.


HOW TO USE IT
-------------

As mentioned above, this simulation was originally developed as a follow-on to a mealworm biology lab, but can easily stand alone.  The virtual "worms" in this simulation are far simpler than real mealworms (which are actually beetle larvae, not real worms).  It is helpful to introduce the simulation starting with just a single worm and introducing the four behaviors one by one.  The simulation can be run with each of the four behaviors (described above) commented out and then incrementally uncommented.  In particular, commenting out the "metabolize" function in the "to live" procedure essentially turns off the worms' life counter, meaning that no worms die.  This is a good way to show the consequences of unbounded population growth, given the (unrealistic) assumption that there are no limitations on resources.  

As usual, "setup" should be executed before "go".

The various sliders, some of which discussed are above, control the following variables:
- Initial Population.  This should be self-explanatory.  Note that the initial population is generated by the "setup" procedure, so changes to this (and other) sliders are generally not registered after setup is executed.
- Life Span.  The number of ticks that each worm lives (this number may be doubled if abundant food is available at each span of time).
- Reproduction Rate.  The fraction of well-fed worms (i.e. having at least half the maximum energy reserve) that reproduce per tick.  Reproduction corresponds to asexual budding.  Individuals reproduce probabilistically.
- Energy Reserve.  This specifies how many excess "calories" a worm can accumulate for consumption when food is not available.  Any worm that runs out of food will starve (die).  A worm can produce up to 1 calorie of energy from eating per tick, while 1/2 a colorie is consumed by living.  Hence, excess energy is accumulated at a rate of 1/2 calorie per tick (while food is abundant).
- Food Conversion.  This specifies what length of grass is cropped by a feeding worm to produce 1 calorie of energy.  This is inversely equivalent to the worm's gain from food.
- Growth Rate.  This specifies how fast the grass grows, i.e. by what amount (per tick) it is increased, up to the maximum.


THINGS TO NOTICE
----------------

The Food_Conversion slider has a direct impact on the steady-state carrying capacity of the environment.  It also has indirect effects on the dynamics of the population.  For instance, a very large value of Food_Conversion has the effect of reducing the reproduction rate, since it is relatively more difficult for a worm to obtain enough food to eat.  Coupling large Food_Conversion with small Life_Span values may easily make the worms go extinct.

The combination of a large reproductive rate with a high Energy_Reserve value might seem to be quite advantagous to a worm population.  However, this combination tends to have the unexpected effect of sustaining a population boom that exhausts the carrying capacity of the environment (particularly when grass regrowth is slow), resulting in mass die-offs and cycles of population boom and bust that may or may not stabilize.  When the Energy_Reserve value is low, and lifespan short, the population of worms tends to respond directly to the amount of food available, rather than with a time lag, and hence rather than oscillating the population merely plateaus at the carrying capacity.


THINGS TO TRY
-------------

A number of basic questions can be answered with this model.  What is the effect of initial population on final population?  (It effectively jumps the clock forward, but otherwise has no effect).  What is the effect of reproductive rate and life span on final population size?  And so on.

For more advanced classes, it is interesting - and challenging - to characterize what combinations of parameters produce:
- oscillating vs. stable populations
- the highest (or lowest) carrying capacity

It is also interesting and challenging to describe the population dynamics analytically.  This is discussed more below.


EXTENDING THE MODEL
-------------------

This model can be extended in a number of ways.  A trivial extension that would be appropriate to relate the model to some other real-life lab (such as bacterial growth) would be to change the turtle appearance from a worm to some other creature (especially for students who may feel squeamish about worms!)  Similarly, characteristics of grass growth, worm metabolism, etc. may all be tailored.

One basic extension that was used with an earlier version of this model was to add a population of birds that preyed on the worms.  This gives rise to familar predator-prey dynamics.  It is also straightforward to add some characteristic (such as length) to worms which affects their food gain, to see how random variations in that characteristic may over time lead to natural selection for longer or shorter worms.  A characteristic such as length may also, when predators are present, be used to illustrate competing influences on survival.  For instance, large worms may live longer (and hence produce more offspring), but may be easier prey for birds.

It would also not be difficult to add state variables that could be used to plot ideal population dynamics according to standard exponential growth and decay models, so that comparative analysis could be accomplished.


RELATED MODELS
--------------

The Wolves and Sheep model is similar in some respects.  There is also a more mathematically oriented population dynamics model in the library which can be related to this one.


CREDITS AND REFERENCES
----------------------

This model was written by Mathew Davies through the NSF-sponsored GK-12 program at the School of Engineering and Applied Sciences at Columbia University, for use in 8th-grade science classrooms at I.S. 143 (Eleanor Roosevelt intermediate school, Washington Heights) in Manhattan, New York in the fall of 2004.  The author may be contacted at the email address:
mpd2002@columbia.edu

This simulation, along with other technology-based classroom resources, may be found at the website
http://tip.columbia.edu</script>
<script type="text/javascript" src="app.js"></script>
    <script type="text/javascript">
;

      var widgets = [{"left":402,"top":10,"right":817,"bottom":446,"patchSize":15.0,"fontSize":10,"wrappingAllowedInX":true,"wrappingAllowedInY":true,"minPxcor":-13,"maxPxcor":13,"minPycor":-13,"maxPycor":13,"updateMode":"Continuous","showTickCounter":true,"tickCounterLabel":"ticks","frameRate":30.0,"type":"view"},{"left":21,"top":10,"right":87,"bottom":43,"source":"setup","forever":false,"buttonType":"OBSERVER","actionKey":null,"type":"button","compiledSource":{"success":true,"result":"Call(setup);"}},{"display":"go/stop","left":98,"top":10,"right":180,"bottom":43,"source":"time-tick","forever":true,"buttonType":"OBSERVER","actionKey":null,"type":"button","compiledSource":{"success":true,"result":"Call(timeTick);"}},{"display":"Initial_Population","left":222,"top":12,"right":359,"bottom":45,"varName":"Initial_Population","min":"0","max":"100","default":3.0,"step":"1","units":null,"direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"0"},"compiledMax":{"success":true,"result":"100"},"compiledStep":{"success":true,"result":"1"}},{"display":"Life_Span","left":20,"top":56,"right":172,"bottom":89,"varName":"Life_Span","min":"0","max":"100","default":40.0,"step":"1","units":"ticks","direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"0"},"compiledMax":{"success":true,"result":"100"},"compiledStep":{"success":true,"result":"1"}},{"display":"Reproduction_Rate","left":20,"top":98,"right":173,"bottom":131,"varName":"Reproduction_Rate","min":"0","max":"50","default":12.0,"step":"1","units":"%","direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"0"},"compiledMax":{"success":true,"result":"50"},"compiledStep":{"success":true,"result":"1"}},{"display":"Food_Conversion","left":220,"top":97,"right":396,"bottom":130,"varName":"Food_Conversion","min":"0","max":"25","default":10.0,"step":"1","units":"mm/cal","direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"0"},"compiledMax":{"success":true,"result":"25"},"compiledStep":{"success":true,"result":"1"}},{"display":"Energy_Reserve","left":220,"top":57,"right":392,"bottom":90,"varName":"Energy_Reserve","min":"2","max":"10","default":5.0,"step":"1","units":"cal","direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"2"},"compiledMax":{"success":true,"result":"10"},"compiledStep":{"success":true,"result":"1"}},{"display":"Growth_Rate","left":219,"top":137,"right":391,"bottom":170,"varName":"Growth_Rate","min":"0","max":"10","default":5.0,"step":"1","units":"mm/tick","direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"0"},"compiledMax":{"success":true,"result":"10"},"compiledStep":{"success":true,"result":"1"}},{"display":"population vs. time","left":13,"top":229,"right":388,"bottom":443,"xAxis":"ticks","yAxis":"population","xmin":0.0,"xmax":10.0,"ymin":0.0,"ymax":10.0,"autoPlotOn":true,"legendOn":false,"setupCode":"","updateCode":"","pens":[{"display":"default","interval":1.0,"mode":0,"color":-16777216,"inLegend":true,"setupCode":"","updateCode":"","type":"pen","compiledSetupCode":{"success":true,"result":""},"compiledUpdateCode":{"success":true,"result":""}}],"type":"plot","compiledSetupCode":{"success":true,"result":""},"compiledUpdateCode":{"success":true,"result":""}},{"display":"Reproduction rate = fraction of population reproducing per tick (given enough food).  Food Conversion = length of grass needed to generate one \"calorie\".  Growth rate = length of grass growth per tick.","left":12,"top":182,"right":389,"bottom":249,"fontSize":11,"color":0.0,"transparent":true,"type":"textBox"}];
      var code    = document.querySelector("#nlogo-code").textContent;
      var info    = document.querySelector("#nlogo-info").textContent;
      var session = Tortoise.fromCompiledModel('#model-container', widgets, code, info, '', true);
      var modelConfig  = (typeof window.modelConfig !== "undefined" && window.modelConfig !== null) ? window.modelConfig : {};
var modelPlotOps = (typeof modelConfig.plotOps !== "undefined" && modelConfig.plotOps !== null) ? modelConfig.plotOps : {};

var PenBundle = tortoise_require('engine/plot/pen');
var Plot      = tortoise_require('engine/plot/plot');
var PlotOps   = tortoise_require('engine/plot/plotops');

modelConfig.plots = [(function() {
  var name    = 'population vs. time';
  var plotOps = (typeof modelPlotOps[name] !== "undefined" && modelPlotOps[name] !== null) ? modelPlotOps[name] : new PlotOps(function() {}, function() {}, function() {}, function() { return function() {}; }, function() { return function() {}; }, function() { return function() {}; });
  var pens    = [new PenBundle.Pen('default', plotOps.makePenOps, false, new PenBundle.State(0.0, 1.0, PenBundle.DisplayMode.Line), function() { workspace.rng.withAux(function() { plotManager.withTemporaryContext('population vs. time', 'default')(function() {}); }); }, function() { workspace.rng.withAux(function() { plotManager.withTemporaryContext('population vs. time', 'default')(function() {}); }); })];
  var setup   = function() { workspace.rng.withAux(function() { plotManager.withTemporaryContext('population vs. time', undefined)(function() {}); }); };
  var update  = function() { workspace.rng.withAux(function() { plotManager.withTemporaryContext('population vs. time', undefined)(function() {}); }); };
  return new Plot(name, pens, plotOps, 'ticks', 'population', false, 0.0, 10.0, 0.0, 10.0, setup, update);
})()];

var workspace = tortoise_require('engine/workspace')(modelConfig)([{ name: 'WORM', singular: 'turtle', varNames: [] }])(['life', 'energy'], [])(['initial_population', 'life_span', 'reproduction_rate', 'food_conversion', 'energy_reserve', 'growth_rate', 'max_population', 'max_grass_height'], ['initial_population', 'life_span', 'reproduction_rate', 'food_conversion', 'energy_reserve', 'growth_rate'], ['grass'], -13, 13, -13, 13, 15.0, true, true, {"default":{"rotate":true,"elements":[{"xcors":[150,40,150,260],"ycors":[5,250,205,250],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"airplane":{"rotate":true,"elements":[{"xcors":[150,135,120,120,15,15,120,135,105,120,150,180,210,165,180,285,285,180,180,165],"ycors":[0,15,60,105,165,195,180,240,270,285,270,285,270,240,180,195,165,105,60,15],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"arrow":{"rotate":true,"elements":[{"xcors":[150,0,105,105,195,195,300],"ycors":[0,150,150,293,293,150,150],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"box":{"rotate":false,"elements":[{"xcors":[150,285,285,150],"ycors":[285,225,75,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,15,150,285],"ycors":[135,75,15,75],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[15,15,150,150],"ycors":[75,225,285,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":150,"y1":285,"x2":150,"y2":135,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":135,"x2":15,"y2":75,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":135,"x2":285,"y2":75,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"bug":{"rotate":true,"elements":[{"x":96,"y":182,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":110,"y":127,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":110,"y":75,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":150,"y1":100,"x2":80,"y2":30,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":100,"x2":220,"y2":30,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"butterfly":{"rotate":true,"elements":[{"xcors":[150,209,225,225,195,165,150],"ycors":[165,199,225,255,270,255,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,89,75,75,105,135,150],"ycors":[165,198,225,255,270,255,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[139,100,55,25,10,10,25,40,85,139],"ycors":[148,105,90,90,105,135,180,195,194,163],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[162,200,245,275,290,290,275,260,215,162],"ycors":[150,105,90,90,105,135,180,195,195,165],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,135,120,135,150,165,180,165],"ycors":[255,225,150,120,105,120,150,225],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":135,"y":90,"diam":30,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x1":150,"y1":105,"x2":195,"y2":60,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":105,"x2":105,"y2":60,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"car":{"rotate":false,"elements":[{"xcors":[300,279,261,240,226,213,203,185,159,135,75,0,0,0,300,300],"ycors":[180,164,144,135,132,106,84,63,50,50,60,150,165,225,225,180],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":180,"y":180,"diam":90,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":30,"y":180,"diam":90,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[162,132,134,209,194,189,180],"ycors":[80,78,135,135,105,96,89],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":47,"y":195,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":195,"y":195,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"circle":{"rotate":false,"elements":[{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"circle 2":{"rotate":false,"elements":[{"x":16,"y":16,"diam":270,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":46,"y":46,"diam":210,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"cow":{"rotate":false,"elements":[{"xcors":[200,197,179,177,166,140,93,78,72,49,48,37,25,25,45,103,179,198,252,272,293,285,255,242,224],"ycors":[193,249,249,196,187,189,191,179,211,209,181,149,120,89,72,84,75,76,64,81,103,121,121,118,167],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[73,86,62,48],"ycors":[210,251,249,208],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[25,16,9,23,25,39],"ycors":[114,195,204,213,200,123],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"face happy":{"rotate":false,"elements":[{"x":8,"y":8,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[150,90,62,47,67,90,109,150,192,210,227,251,236,212],"ycors":[255,239,213,191,179,203,218,225,218,203,181,194,217,240],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"face neutral":{"rotate":false,"elements":[{"x":8,"y":7,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xmin":60,"ymin":195,"xmax":240,"ymax":225,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"face sad":{"rotate":false,"elements":[{"x":8,"y":8,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[150,90,62,47,67,90,109,150,192,210,227,251,236,212],"ycors":[168,184,210,232,244,220,205,198,205,220,242,229,206,183],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"fish":{"rotate":false,"elements":[{"xcors":[44,21,15,0,15,0,13,20,45],"ycors":[131,87,86,120,150,180,214,212,166],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[135,119,95,76,46,60],"ycors":[195,235,218,210,204,165],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[75,83,71,86,166,135],"ycors":[45,77,103,114,78,60],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[30,151,226,280,292,292,287,270,195,151,30],"ycors":[136,77,81,119,146,160,170,195,210,212,166],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":215,"y":106,"diam":30,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"flag":{"rotate":false,"elements":[{"xmin":60,"ymin":15,"xmax":75,"ymax":300,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[90,270,90],"ycors":[150,90,30],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":75,"y1":135,"x2":90,"y2":135,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":75,"y1":45,"x2":90,"y2":45,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"flower":{"rotate":false,"elements":[{"xcors":[135,165,180,180,150,165,195,195,165],"ycors":[120,165,210,240,300,300,240,195,135],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"x":85,"y":132,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":130,"y":147,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":192,"y":85,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":85,"y":40,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":177,"y":40,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":177,"y":132,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":70,"y":85,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":130,"y":25,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":96,"y":51,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":113,"y":68,"diam":74,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[189,219,249,279,234],"ycors":[233,188,173,188,218],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[180,150,105,75,135],"ycors":[255,210,210,240,240],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false}]},"house":{"rotate":false,"elements":[{"xmin":45,"ymin":120,"xmax":255,"ymax":285,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":210,"xmax":180,"ymax":285,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[15,150,285],"ycors":[120,15,120],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":30,"y1":120,"x2":270,"y2":120,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"leaf":{"rotate":false,"elements":[{"xcors":[150,135,120,60,30,60,60,15,30,15,40,45,60,90,105,120,105,120,135,150,165,180,195,180,195,210,240,255,263,285,270,285,240,240,270,240,180,165],"ycors":[210,195,210,210,195,180,165,135,120,105,104,90,90,105,120,120,60,60,30,15,30,60,60,120,120,105,90,90,104,105,120,135,165,180,195,210,210,195],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,135,120,105,105,135,165,165],"ycors":[195,240,255,255,285,285,240,195],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"line":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":300,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"link":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":300,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"link direction":{"rotate":true,"elements":[{"x1":150,"y1":150,"x2":30,"y2":225,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":150,"x2":270,"y2":225,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"pentagon":{"rotate":false,"elements":[{"xcors":[150,15,60,240,285],"ycors":[15,120,285,285,120],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"person":{"rotate":false,"elements":[{"x":110,"y":5,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[105,120,90,105,135,150,165,195,210,180,195],"ycors":[90,195,285,300,300,225,300,300,285,195,90],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":127,"ymin":79,"xmax":172,"ymax":94,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[195,240,225,165],"ycors":[90,150,180,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[105,60,75,135],"ycors":[90,150,180,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"plant":{"rotate":false,"elements":[{"xmin":135,"ymin":90,"xmax":165,"ymax":300,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[255,210,195,255,285],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,210,255,225,165],"ycors":[255,210,195,255,285],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[180,135,120,180,210],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,165,225,255,210],"ycors":[180,210,180,120,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[105,60,45,105,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,165,225,255,210],"ycors":[105,135,105,45,60],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,120,150,180,165],"ycors":[90,45,15,45,90],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"square":{"rotate":false,"elements":[{"xmin":30,"ymin":30,"xmax":270,"ymax":270,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"square 2":{"rotate":false,"elements":[{"xmin":30,"ymin":30,"xmax":270,"ymax":270,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":60,"ymin":60,"xmax":240,"ymax":240,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"star":{"rotate":false,"elements":[{"xcors":[60,150,240,15,285],"ycors":[270,0,270,105,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[75,105,195,225,150],"ycors":[120,210,210,120,75],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"target":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":60,"y":60,"diam":180,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":90,"y":90,"diam":120,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":120,"y":120,"diam":60,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"tree":{"rotate":false,"elements":[{"x":118,"y":3,"diam":94,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":195,"xmax":180,"ymax":300,"type":"rectangle","color":"rgba(157, 110, 72, 1.0)","filled":true,"marked":false},{"x":65,"y":21,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":116,"y":41,"diam":127,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":45,"y":90,"diam":120,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":104,"y":74,"diam":152,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"triangle":{"rotate":false,"elements":[{"xcors":[150,15,285],"ycors":[30,255,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"triangle 2":{"rotate":false,"elements":[{"xcors":[150,15,285],"ycors":[30,255,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[151,225,75],"ycors":[99,223,224],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"truck":{"rotate":false,"elements":[{"xmin":4,"ymin":45,"xmax":195,"ymax":187,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[296,296,259,244,208,207],"ycors":[193,150,134,104,104,194],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":195,"ymin":60,"xmax":195,"ymax":105,"type":"rectangle","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[238,252,219,218],"ycors":[112,141,141,112],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":234,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xmin":181,"ymin":185,"xmax":214,"ymax":194,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":144,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":24,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":24,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":144,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":234,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"turtle":{"rotate":true,"elements":[{"xcors":[215,240,246,228,215,193],"ycors":[204,233,254,266,252,210],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[195,225,245,260,269,261,240,225,210],"ycors":[90,75,75,89,108,124,105,105,105],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[105,75,55,40,31,39,60,75,90],"ycors":[90,75,75,89,108,124,105,105,105],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[132,134,107,108,150,192,192,169,172],"ycors":[85,64,51,17,2,18,52,65,87],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[85,60,54,72,85,107],"ycors":[204,233,254,266,252,210],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[119,179,209,224,220,175,128,81,74,88],"ycors":[75,75,101,135,225,261,261,224,135,99],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"wheel":{"rotate":false,"elements":[{"x":3,"y":3,"diam":294,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x1":150,"y1":285,"x2":150,"y2":15,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":15,"y1":150,"x2":285,"y2":150,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":120,"y":120,"diam":60,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":216,"y1":40,"x2":79,"y2":269,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":40,"y1":84,"x2":269,"y2":221,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":40,"y1":216,"x2":269,"y2":79,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":84,"y1":40,"x2":221,"y2":269,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"worm":{"rotate":true,"elements":[{"xcors":[135,120,120,135,165,180,180,165,195,210,195,180,180,165,135],"ycors":[75,120,165,195,225,255,285,300,285,225,195,165,120,75,75],"type":"polygon","color":"rgba(157, 110, 72, 1.0)","filled":true,"marked":false},{"x":120,"y":30,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":30,"xmax":135,"ymax":45,"type":"rectangle","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xmin":165,"ymin":30,"xmax":180,"ymax":45,"type":"rectangle","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[148,148,194,152],"ycors":[90,167,242,168],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"x":{"rotate":false,"elements":[{"xcors":[270,225,30,75],"ycors":[75,30,225,270],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[30,75,270,225],"ycors":[75,30,225,270],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]}}, {"default":{}});

var BreedManager  = workspace.breedManager;
var LayoutManager = workspace.layoutManager;
var LinkPrims     = workspace.linkPrims;
var ListPrims     = workspace.listPrims;
var MousePrims    = workspace.mousePrims;
var plotManager   = workspace.plotManager;
var Prims         = workspace.prims;
var SelfPrims     = workspace.selfPrims;
var SelfManager   = workspace.selfManager;
var Updater       = workspace.updater;
var world         = workspace.world;

var Call           = tortoise_require('util/call');
var ColorModel     = tortoise_require('util/colormodel');
var Exception      = tortoise_require('util/exception');
var Trig           = tortoise_require('util/trig');
var Type           = tortoise_require('util/typechecker');
var notImplemented = tortoise_require('util/notimplemented');

var Dump      = tortoise_require('engine/dump');
var Link      = tortoise_require('engine/core/link');
var LinkSet   = tortoise_require('engine/core/linkset');
var Nobody    = tortoise_require('engine/core/nobody');
var PatchSet  = tortoise_require('engine/core/patchset');
var Turtle    = tortoise_require('engine/core/turtle');
var TurtleSet = tortoise_require('engine/core/turtleset');
var Tasks     = tortoise_require('engine/prim/tasks');

var AgentModel = tortoise_require('agentmodel');
var Denuller   = tortoise_require('nashorn/denuller');
var Random     = tortoise_require('shim/random');
var StrictMath = tortoise_require('shim/strictmath');
function startup() {
  Call(setup);
}
function setup() {
  world.observer.setGlobal('max_population', 10000);
  world.observer.setGlobal('max_grass_height', 50);
  world.turtleManager.clearTurtles();
  plotManager.clearPlot();
  world.clearPatches();
  plotManager.setCurrentPlot("population vs. time");
  world.turtleManager.createTurtles(world.observer.getGlobal('initial_population'), 'WORM').ask(function() {}, true);
  world.turtleManager.turtlesOfBreed("WORM").ask(function() {
    Call(getready);
    SelfPrims.setVariable('life', world.observer.getGlobal('life_span'));
    SelfPrims.setVariable('energy', world.observer.getGlobal('energy_reserve'));
  }, true);
  world.patches().ask(function() {
    SelfPrims.setPatchVariable('grass', world.observer.getGlobal('food_conversion'));
  }, true);
}
function timeTick() {
  world.patches().ask(function() {
    SelfPrims.setPatchVariable('grass', (SelfPrims.getPatchVariable('grass') + world.observer.getGlobal('growth_rate')));
    if (Prims.gt(SelfPrims.getPatchVariable('grass'), world.observer.getGlobal('max_grass_height'))) {
      SelfPrims.setPatchVariable('grass', world.observer.getGlobal('max_grass_height'));
    }
  }, true);
  world.patches().ask(function() {
    SelfPrims.setPatchVariable('pcolor', ColorModel.scaleColor(55, SelfPrims.getPatchVariable('grass'), 0, (world.observer.getGlobal('max_grass_height') * 2)));
  }, true);
  world.turtleManager.turtlesOfBreed("WORM").ask(function() {
    Call(live);
  }, true);
  plotManager.plotValue(world.turtles().size());
  if (Prims.gt(world.turtles().size(), world.observer.getGlobal('max_population'))) {
    throw new Exception.StopInterrupt;
  }
}
function live() {
  Call(crawl);
  Call(eat);
  Call(metabolize);
  Call(reproduce);
}
function getready() {
  SelfPrims.setVariable('shape', "worm");
  SelfPrims.setXY(Prims.random(world.topology.width), Prims.random(world.topology.height));
  SelfPrims.setVariable('heading', Prims.random(360));
}
function metabolize() {
  SelfPrims.setVariable('life', (SelfPrims.getVariable('life') - 1));
  if (Prims.equality(SelfPrims.getVariable('energy'), world.observer.getGlobal('energy_reserve'))) {
    SelfPrims.setVariable('life', (SelfPrims.getVariable('life') + 0.5));
  }
  SelfPrims.setVariable('energy', (SelfPrims.getVariable('energy') - 0.5));
  if ((Prims.lt(SelfPrims.getVariable('life'), 0) || Prims.lt(SelfPrims.getVariable('energy'), 0))) {
    SelfPrims.die();
  }
}
function reproduce() {
  if (Prims.gt(world.observer.getGlobal('reproduction_rate'), Prims.random(100))) {
    if (Prims.gt(SelfPrims.getVariable('energy'), (world.observer.getGlobal('energy_reserve') / 2))) {
      SelfPrims.hatch(1, '').ask(function() {
        SelfPrims.setVariable('life', world.observer.getGlobal('life_span'));
        SelfPrims.setVariable('heading', Prims.random(360));
        SelfPrims.setVariable('energy', (SelfPrims.getVariable('energy') / 2));
      }, true);
      SelfPrims.setVariable('energy', (SelfPrims.getVariable('energy') / 2));
    }
  }
}
function crawl() {
  SelfPrims.right(Prims.random(20));
  SelfPrims.left(Prims.random(20));
  SelfPrims.fd((Prims.random(2) + Prims.random(2)));
}
function eat() {
  var grasshere = SelfManager.self().patchAt(0, 0).projectionBy(function() {
    return SelfPrims.getPatchVariable('grass');
  });
  if ((Prims.gt(grasshere, world.observer.getGlobal('food_conversion')) && Prims.lt(SelfPrims.getVariable('energy'), world.observer.getGlobal('energy_reserve')))) {
    SelfPrims.setVariable('energy', (SelfPrims.getVariable('energy') + 1));
    SelfManager.self().patchAt(0, 0).ask(function() {
      SelfPrims.setPatchVariable('grass', (grasshere - world.observer.getGlobal('food_conversion')));
    }, true);
  }
}
world.observer.setGlobal('initial_population', 3);
world.observer.setGlobal('life_span', 40);
world.observer.setGlobal('reproduction_rate', 12);
world.observer.setGlobal('food_conversion', 10);
world.observer.setGlobal('energy_reserve', 5);
world.observer.setGlobal('growth_rate', 5);
      session.startLoop()
    </script>
  

</body></html>