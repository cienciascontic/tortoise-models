



<html>
  <head>
<link rel="stylesheet" type="text/css" href="app.css" charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="app-custom.css" charset="utf-8"/>
  </head>
  <body>
    <div id="model-container"></div>
<script type="text/javascript" src="app.js"></script>
    <script type="text/javascript">
;

      var session =
        (function () {
          var widgets = [{"left":219,"top":10,"right":692,"bottom":243,"patchSize":6.53,"fontSize":10,"wrappingAllowedInX":false,"wrappingAllowedInY":false,"minPxcor":-35,"maxPxcor":35,"minPycor":-15,"maxPycor":15,"updateMode":"Continuous","showTickCounter":false,"tickCounterLabel":"ticks","frameRate":30.0,"type":"view"},{"display":"run/pause","left":220,"top":247,"right":317,"bottom":280,"source":"calc-light","forever":true,"buttonType":"OBSERVER","actionKey":null,"type":"button","compiledSource":{"success":true,"result":"Call(calcLight);"}},{"left":320,"top":247,"right":383,"bottom":280,"source":"reset","forever":false,"buttonType":"OBSERVER","actionKey":null,"type":"button","compiledSource":{"success":true,"result":"Call(reset);"}},{"display":"Light Intensity","left":10,"top":10,"right":210,"bottom":160,"xAxis":"time","yAxis":null,"xmin":0.0,"xmax":500.0,"ymin":0.75,"ymax":1.0,"autoPlotOn":false,"legendOn":false,"setupCode":"","updateCode":"","pens":[{"display":"default","interval":1.0,"mode":0,"color":-16777216,"inLegend":true,"setupCode":"","updateCode":"","type":"pen","compiledSetupCode":{"success":true,"result":""},"compiledUpdateCode":{"success":true,"result":""}}],"type":"plot","compiledSetupCode":{"success":true,"result":""},"compiledUpdateCode":{"success":true,"result":""}},{"display":"graph-time-window","left":9,"top":162,"right":210,"bottom":195,"varName":"graph-time-window","min":"100","max":"10000","default":500.0,"step":"1","units":null,"direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"100"},"compiledMax":{"success":true,"result":"10000"},"compiledStep":{"success":true,"result":"1"}},{"display":"reset graph","left":55,"top":230,"right":158,"bottom":263,"source":"reset-graph","forever":false,"buttonType":"OBSERVER","actionKey":null,"type":"button","compiledSource":{"success":true,"result":"Call(resetGraph);"}},{"display":"planet-diameter","left":437,"top":247,"right":693,"bottom":280,"varName":"planet-diameter","min":"0.2","max":"50","default":16.0,"step":"0.2","units":"earth diameters","direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"0.2"},"compiledMax":{"success":true,"result":"50"},"compiledStep":{"success":true,"result":"0.2"}},{"display":"magnify-y-range","left":9,"top":195,"right":210,"bottom":228,"varName":"magnify-y-range","min":"0","max":"99","default":37.0,"step":"1","units":"x","direction":"horizontal","type":"slider","compiledMin":{"success":true,"result":"0"},"compiledMax":{"success":true,"result":"99"},"compiledStep":{"success":true,"result":"1"}}];
          var code    = "breed [suns sun]\ndirected-link-breed [arrows arrow]\nbreed [planets planet]\n\nglobals [delay-time timestep star-diameter]\n\nto SETUP ; otrunk looks for this procedure to call\nEND\n\nto startup\n  set delay-time 10\n  set timestep 0\n  set star-diameter 20\n  reset\nend\n\nto calc-light\n  ifelse planet-diameter > 2.4 [         ; checks to see if the planet is too small to see and shows a message\n    ask planet 3 [set hidden? true]\n    ask planet 4 [set hidden? true]]\n  [ ask planet 3 [set hidden? false]\n    ask planet 4 [set hidden? false]]\n  ask planet 1 [set size (planet-diameter * star-diameter) / 109] ; based on Sun/Earth ratio\n  if mouse-down? [\n    ask planet 1 [\n      set xcor mouse-xcor\n      set ycor mouse-ycor]\n      let label-x [xcor] of planet 1 - 6                           ; offset \"planet\" label from actual planet\n    if (label-x < min-pxcor) or (label-x > max-pxcor)              ; don't try to draw \"planet\" label outside or world bounds or error occurs\n    [ set label-x [xcor] of planet 2]                              ;\n      let label-y [ycor] of planet 1                               ;\n    if (label-y < min-pycor) or (label-y > max-pycor)              ;\n    [ set label-y [ycor] of planet 2]                              ;\n    ask planet 2 [\n      set xcor label-x \n      set ycor label-y]\n  ]\n  let dist sqrt(abs([xcor] of planet 1 - [xcor] of sun 0) ^ 2 + abs([ycor] of planet 1 - [ycor] of sun 0) ^ 2) ; distance between centers of planet and star\n  let p-rad ([size] of planet 1) / 2   ; planet radius\n  let s-rad ([size] of sun 0) / 2      ; star raduis\n  let brightness 1                     ; set default full brightness\n  let percent-overlap 1                ; set default full overlap\n  if dist < (p-rad + s-rad) [          ; if overlap then do the following\n    if dist > (s-rad - p-rad) [        ; only calc my-acos if overlap is partial otherwise skip this next calc\n      let area-of-overlap p-rad ^ 2 * (my-acos((dist ^ 2 + p-rad ^ 2 - s-rad ^ 2) / (2 * dist * p-rad)) * pi / 180) + s-rad ^ 2 * (my-acos((dist ^ 2 + s-rad ^ 2 - p-rad ^ 2)/(2 * dist * s-rad)) * pi / 180) - 0.5 * sqrt((-1 * dist + p-rad + s-rad) * (dist + p-rad - s-rad) * (dist - p-rad + s-rad) * (dist + p-rad + s-rad)) ; calculates the overlap of two arbitrarily sized circles (note the conversion of my-acos value to radians)\n      let area-of-planet pi * (([size] of planet 1) / 2) ^ 2\n      set percent-overlap area-of-overlap / area-of-planet]\n    set brightness 1 - (( [size] of planet 1 / [size] of sun 0 ) ^ 2) * percent-overlap] ; dim light according to partial overlaps using the percent-overlap coefficient\n  plotxy timestep brightness\n  set timestep timestep + 1\n  ifelse timestep < graph-time-window \n    [ set-plot-x-range 0 graph-time-window ]                                       ; adjust graph based on slider settings\n    [ set-plot-x-range (timestep - graph-time-window) timestep ]   ; x-max is always last data point plotted and x-min is relative to that based on the slider\n  set-plot-y-range magnify-y-range / 100 1                       ; convert slider to 1/100th of its value to set y-min\nend\n\nto-report my-acos [x]\nend\n\nto reset\n  ct\n  set timestep 0\n  set graph-time-window 500\n  clear-plot\n  create-suns 1 [set shape \"circle\" \n    set size star-diameter \n    set color [255 255 0 175]\n    set label \"star\"\n    set label-color yellow]\n  create-planets 1 [set shape \"circle 2\" \n    set size (planet-diameter * star-diameter) / 109 \n    set color yellow\n    set xcor -20\n    set ycor -9]\n  create-planets 1 [\n    set label \"planet\"\n    set label-color red\n    set color [0 0 0 0]\n    set xcor [xcor] of planet 1 - 7                         ; offset label using turtle with offset\n    set ycor [ycor] of planet 1]                            ;\n  ask planet 2 [create-arrow-to planet 1 [set color red]]\n  create-planets 1 [\n    set label \"planet too small to see at this scale\"\n    set hidden? true\n    set xcor 13\n    set ycor min-pycor + 4]\n  create-planets 1 [\n    set label \"try magnifying the y-axis\"\n    set hidden? true\n    set xcor 9\n    set ycor min-pycor + 2]\nend\n\nto reset-graph\n  clear-plot\n  set-plot-x-range 0 graph-time-window\n  set timestep 0\nend";
          var info    = "WHAT IS IT?\n-----------\nThis section could give a general understanding of what the model is trying to show or explain.\n\n\nHOW IT WORKS\n------------\nThis section could explain what rules the agents use to create the overall behavior of the model.\n\n\nHOW TO USE IT\n-------------\nThis section could explain how to use the model, including a description of each of the items in the interface tab.\n\n\nTHINGS TO NOTICE\n----------------\nThis section could give some ideas of things for the user to notice while running the model.\n\n\nTHINGS TO TRY\n-------------\nThis section could give some ideas of things for the user to try to do (move sliders, switches, etc.) with the model.\n\n\nEXTENDING THE MODEL\n-------------------\nThis section could give some ideas of things to add or change in the procedures tab to make the model more complicated, detailed, accurate, etc.\n\n\nNETLOGO FEATURES\n----------------\nThis section could point out any especially interesting or unusual features of NetLogo that the model makes use of, particularly in the Procedures tab.  It might also point out places where workarounds were needed because of missing features.\n\n\nRELATED MODELS\n--------------\nThis section could give the names of models in the NetLogo Models Library or elsewhere which are of related interest.\n\n\nCREDITS AND REFERENCES\n----------------------\nThis section could contain a reference to the model's URL on the web if it has one, as well as any other necessary credits or references.";
          return Tortoise.fromCompiledModel('#model-container', widgets, code, info, '', true);
        })();
      var modelConfig  = (typeof window.modelConfig !== "undefined" && window.modelConfig !== null) ? window.modelConfig : {};
var modelPlotOps = (typeof modelConfig.plotOps !== "undefined" && modelConfig.plotOps !== null) ? modelConfig.plotOps : {};

var PenBundle = tortoise_require('engine/plot/pen');
var Plot      = tortoise_require('engine/plot/plot');
var PlotOps   = tortoise_require('engine/plot/plotops');

modelConfig.plots = [(function() {
  var name    = 'Light Intensity';
  var plotOps = (typeof modelPlotOps[name] !== "undefined" && modelPlotOps[name] !== null) ? modelPlotOps[name] : new PlotOps(function() {}, function() {}, function() {}, function() { return function() {}; }, function() { return function() {}; }, function() { return function() {}; });
  var pens    = [new PenBundle.Pen('default', plotOps.makePenOps, false, new PenBundle.State(0.0, 1.0, PenBundle.DisplayMode.Line), function() { workspace.rng.withAux(function() { plotManager.withTemporaryContext('Light Intensity', 'default')(function() {}); }); }, function() { workspace.rng.withAux(function() { plotManager.withTemporaryContext('Light Intensity', 'default')(function() {}); }); })];
  var setup   = function() { workspace.rng.withAux(function() { plotManager.withTemporaryContext('Light Intensity', undefined)(function() {}); }); };
  var update  = function() { workspace.rng.withAux(function() { plotManager.withTemporaryContext('Light Intensity', undefined)(function() {}); }); };
  return new Plot(name, pens, plotOps, 'time', '', false, 0.0, 500.0, 0.75, 1.0, setup, update);
})()];
if (typeof javax !== "undefined") { modelConfig.output = { clear: function(){}, write: function(str) { context.getWriter().print(str); } } }

var workspace = tortoise_require('engine/workspace')(modelConfig)([{ name: 'SUNS', singular: 'sun', varNames: [] }, { name: 'PLANETS', singular: 'planet', varNames: [] }, { name: 'ARROWS', singular: 'arrow', varNames: [], isDirected: true }])([], [])(['graph-time-window', 'planet-diameter', 'magnify-y-range', 'delay-time', 'timestep', 'star-diameter'], ['graph-time-window', 'planet-diameter', 'magnify-y-range'], [], -35, 35, -15, 15, 6.53, false, false, {"default":{"rotate":true,"elements":[{"xcors":[150,40,150,260],"ycors":[5,250,205,250],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"airplane":{"rotate":true,"elements":[{"xcors":[150,135,120,120,15,15,120,135,105,120,150,180,210,165,180,285,285,180,180,165],"ycors":[0,15,60,105,165,195,180,240,270,285,270,285,270,240,180,195,165,105,60,15],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"arrow":{"rotate":true,"elements":[{"xcors":[150,0,105,105,195,195,300],"ycors":[0,150,150,293,293,150,150],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"box":{"rotate":false,"elements":[{"xcors":[150,285,285,150],"ycors":[285,225,75,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,15,150,285],"ycors":[135,75,15,75],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[15,15,150,150],"ycors":[75,225,285,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":150,"y1":285,"x2":150,"y2":135,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":135,"x2":15,"y2":75,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":135,"x2":285,"y2":75,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"bug":{"rotate":true,"elements":[{"x":96,"y":182,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":110,"y":127,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":110,"y":75,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":150,"y1":100,"x2":80,"y2":30,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":100,"x2":220,"y2":30,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"butterfly":{"rotate":true,"elements":[{"xcors":[150,209,225,225,195,165,150],"ycors":[165,199,225,255,270,255,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,89,75,75,105,135,150],"ycors":[165,198,225,255,270,255,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[139,100,55,25,10,10,25,40,85,139],"ycors":[148,105,90,90,105,135,180,195,194,163],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[162,200,245,275,290,290,275,260,215,162],"ycors":[150,105,90,90,105,135,180,195,195,165],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,135,120,135,150,165,180,165],"ycors":[255,225,150,120,105,120,150,225],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":135,"y":90,"diam":30,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x1":150,"y1":105,"x2":195,"y2":60,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false},{"x1":150,"y1":105,"x2":105,"y2":60,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"car":{"rotate":false,"elements":[{"xcors":[300,279,261,240,226,213,203,185,159,135,75,0,0,0,300,300],"ycors":[180,164,144,135,132,106,84,63,50,50,60,150,165,225,225,180],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":180,"y":180,"diam":90,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":30,"y":180,"diam":90,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[162,132,134,209,194,189,180],"ycors":[80,78,135,135,105,96,89],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":47,"y":195,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":195,"y":195,"diam":58,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"circle":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"circle 2":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":15,"y":15,"diam":270,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"cow":{"rotate":false,"elements":[{"xcors":[200,197,179,177,166,140,93,78,72,49,48,37,25,25,45,103,179,198,252,272,293,285,255,242,224],"ycors":[193,249,249,196,187,189,191,179,211,209,181,149,120,89,72,84,75,76,64,81,103,121,121,118,167],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[73,86,62,48],"ycors":[210,251,249,208],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[25,16,9,23,25,39],"ycors":[114,195,204,213,200,123],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"cylinder":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"dot":{"rotate":false,"elements":[{"x":90,"y":90,"diam":120,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"face happy":{"rotate":false,"elements":[{"x":8,"y":8,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[150,90,62,47,67,90,109,150,192,210,227,251,236,212],"ycors":[255,239,213,191,179,203,218,225,218,203,181,194,217,240],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"face neutral":{"rotate":false,"elements":[{"x":8,"y":7,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xmin":60,"ymin":195,"xmax":240,"ymax":225,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"face sad":{"rotate":false,"elements":[{"x":8,"y":8,"diam":285,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":60,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":180,"y":75,"diam":60,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[150,90,62,47,67,90,109,150,192,210,227,251,236,212],"ycors":[168,184,210,232,244,220,205,198,205,220,242,229,206,183],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"fish":{"rotate":false,"elements":[{"xcors":[44,21,15,0,15,0,13,20,45],"ycors":[131,87,86,120,150,180,214,212,166],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[135,119,95,76,46,60],"ycors":[195,235,218,210,204,165],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[75,83,71,86,166,135],"ycors":[45,77,103,114,78,60],"type":"polygon","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[30,151,226,280,292,292,287,270,195,151,30],"ycors":[136,77,81,119,146,160,170,195,210,212,166],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":215,"y":106,"diam":30,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"flag":{"rotate":false,"elements":[{"xmin":60,"ymin":15,"xmax":75,"ymax":300,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[90,270,90],"ycors":[150,90,30],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":75,"y1":135,"x2":90,"y2":135,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":75,"y1":45,"x2":90,"y2":45,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"flower":{"rotate":false,"elements":[{"xcors":[135,165,180,180,150,165,195,195,165],"ycors":[120,165,210,240,300,300,240,195,135],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"x":85,"y":132,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":130,"y":147,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":192,"y":85,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":85,"y":40,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":177,"y":40,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":177,"y":132,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":70,"y":85,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":130,"y":25,"diam":38,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":96,"y":51,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":113,"y":68,"diam":74,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[189,219,249,279,234],"ycors":[233,188,173,188,218],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[180,150,105,75,135],"ycors":[255,210,210,240,240],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false}]},"house":{"rotate":false,"elements":[{"xmin":45,"ymin":120,"xmax":255,"ymax":285,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":210,"xmax":180,"ymax":285,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xcors":[15,150,285],"ycors":[120,15,120],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":30,"y1":120,"x2":270,"y2":120,"type":"line","color":"rgba(0, 0, 0, 1.0)","filled":false,"marked":false}]},"leaf":{"rotate":false,"elements":[{"xcors":[150,135,120,60,30,60,60,15,30,15,40,45,60,90,105,120,105,120,135,150,165,180,195,180,195,210,240,255,263,285,270,285,240,240,270,240,180,165],"ycors":[210,195,210,210,195,180,165,135,120,105,104,90,90,105,120,120,60,60,30,15,30,60,60,120,120,105,90,90,104,105,120,135,165,180,195,210,210,195],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,135,120,105,105,135,165,165],"ycors":[195,240,255,255,285,285,240,195],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"line":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":300,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"line half":{"rotate":true,"elements":[{"x1":150,"y1":0,"x2":150,"y2":150,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"pentagon":{"rotate":false,"elements":[{"xcors":[150,15,60,240,285],"ycors":[15,120,285,285,120],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"person":{"rotate":false,"elements":[{"x":110,"y":5,"diam":80,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[105,120,90,105,135,150,165,195,210,180,195],"ycors":[90,195,285,300,300,225,300,300,285,195,90],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":127,"ymin":79,"xmax":172,"ymax":94,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[195,240,225,165],"ycors":[90,150,180,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[105,60,75,135],"ycors":[90,150,180,105],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"plant":{"rotate":false,"elements":[{"xmin":135,"ymin":90,"xmax":165,"ymax":300,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[255,210,195,255,285],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,210,255,225,165],"ycors":[255,210,195,255,285],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[180,135,120,180,210],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,165,225,255,210],"ycors":[180,210,180,120,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,90,45,75,135],"ycors":[105,60,45,105,135],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[165,165,225,255,210],"ycors":[105,135,105,45,60],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[135,120,150,180,165],"ycors":[90,45,15,45,90],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"sheep":{"rotate":false,"elements":[{"xmin":151,"ymin":225,"xmax":180,"ymax":285,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":47,"ymin":225,"xmax":75,"ymax":285,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":15,"ymin":75,"xmax":210,"ymax":225,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":135,"y":75,"diam":150,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":165,"y":76,"diam":116,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"square":{"rotate":false,"elements":[{"xmin":30,"ymin":30,"xmax":270,"ymax":270,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"square 2":{"rotate":false,"elements":[{"xmin":30,"ymin":30,"xmax":270,"ymax":270,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":60,"ymin":60,"xmax":240,"ymax":240,"type":"rectangle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"star":{"rotate":false,"elements":[{"xcors":[151,185,298,207,242,151,59,94,3,116],"ycors":[1,108,108,175,282,216,282,175,108,108],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"sun":{"rotate":false,"elements":[{"x":45,"y":45,"diam":210,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[300,240,240],"ycors":[150,120,180],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,120,180],"ycors":[0,60,60],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[150,120,180],"ycors":[300,240,240],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[0,60,60],"ycors":[150,120,180],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[60,105,45],"ycors":[195,240,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[60,105,45],"ycors":[105,60,45],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[195,240,255],"ycors":[60,105,45],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[240,195,255],"ycors":[195,240,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"target":{"rotate":false,"elements":[{"x":0,"y":0,"diam":300,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":60,"y":60,"diam":180,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":90,"y":90,"diam":120,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":120,"y":120,"diam":60,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"tree":{"rotate":false,"elements":[{"x":118,"y":3,"diam":94,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":120,"ymin":195,"xmax":180,"ymax":300,"type":"rectangle","color":"rgba(157, 110, 72, 1.0)","filled":true,"marked":false},{"x":65,"y":21,"diam":108,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":116,"y":41,"diam":127,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":45,"y":90,"diam":120,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":104,"y":74,"diam":152,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"triangle":{"rotate":false,"elements":[{"xcors":[150,15,285],"ycors":[30,255,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"triangle 2":{"rotate":false,"elements":[{"xcors":[150,15,285],"ycors":[30,255,255],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[151,225,75],"ycors":[99,223,224],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false}]},"truck":{"rotate":false,"elements":[{"xmin":4,"ymin":45,"xmax":195,"ymax":187,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[296,296,259,244,208,207],"ycors":[193,150,134,104,104,194],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xmin":195,"ymin":60,"xmax":195,"ymax":105,"type":"rectangle","color":"rgba(255, 255, 255, 1.0)","filled":true,"marked":false},{"xcors":[238,252,219,218],"ycors":[112,141,141,112],"type":"polygon","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":234,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"xmin":181,"ymin":185,"xmax":214,"ymax":194,"type":"rectangle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":144,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":24,"y":174,"diam":42,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x":24,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":144,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":234,"y":174,"diam":42,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"turtle":{"rotate":true,"elements":[{"xcors":[215,240,246,228,215,193],"ycors":[204,233,254,266,252,210],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[195,225,245,260,269,261,240,225,210],"ycors":[90,75,75,89,108,124,105,105,105],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[105,75,55,40,31,39,60,75,90],"ycors":[90,75,75,89,108,124,105,105,105],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[132,134,107,108,150,192,192,169,172],"ycors":[85,64,51,17,2,18,52,65,87],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[85,60,54,72,85,107],"ycors":[204,233,254,266,252,210],"type":"polygon","color":"rgba(89, 176, 60, 1.0)","filled":true,"marked":false},{"xcors":[119,179,209,224,220,175,128,81,74,88],"ycors":[75,75,101,135,225,261,261,224,135,99],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]},"wheel":{"rotate":false,"elements":[{"x":3,"y":3,"diam":294,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x":30,"y":30,"diam":240,"type":"circle","color":"rgba(0, 0, 0, 1.0)","filled":true,"marked":false},{"x1":150,"y1":285,"x2":150,"y2":15,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":15,"y1":150,"x2":285,"y2":150,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x":120,"y":120,"diam":60,"type":"circle","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"x1":216,"y1":40,"x2":79,"y2":269,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":40,"y1":84,"x2":269,"y2":221,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":40,"y1":216,"x2":269,"y2":79,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":84,"y1":40,"x2":221,"y2":269,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"x":{"rotate":false,"elements":[{"xcors":[270,225,30,75],"ycors":[75,30,225,270],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true},{"xcors":[30,75,270,225],"ycors":[75,30,225,270],"type":"polygon","color":"rgba(141, 141, 141, 1.0)","filled":true,"marked":true}]}}, {"default":{"direction-indicator":{"rotate":true,"elements":[{"x1":150,"y1":90,"x2":60,"y2":135,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true},{"x1":150,"y1":90,"x2":240,"y2":135,"type":"line","color":"rgba(141, 141, 141, 1.0)","filled":false,"marked":true}]},"curviness":1.0,"lines":[{"x-offset":-0.2,"is-visible":false,"dashes":[0.0,1.0]},{"x-offset":0.0,"is-visible":true,"dashes":[1.0,0.0]},{"x-offset":0.2,"is-visible":false,"dashes":[0.0,1.0]}]}});

var BreedManager  = workspace.breedManager;
var LayoutManager = workspace.layoutManager;
var LinkPrims     = workspace.linkPrims;
var ListPrims     = workspace.listPrims;
var MousePrims    = workspace.mousePrims;
var plotManager   = workspace.plotManager;
var Prims         = workspace.prims;
var PrintPrims    = workspace.printPrims;
var OutputPrims   = workspace.outputPrims;
var SelfPrims     = workspace.selfPrims;
var SelfManager   = workspace.selfManager;
var Updater       = workspace.updater;
var world         = workspace.world;

var Call           = tortoise_require('util/call');
var ColorModel     = tortoise_require('util/colormodel');
var Exception      = tortoise_require('util/exception');
var Trig           = tortoise_require('util/trig');
var Type           = tortoise_require('util/typechecker');
var notImplemented = tortoise_require('util/notimplemented');

var Dump      = tortoise_require('engine/dump');
var Link      = tortoise_require('engine/core/link');
var LinkSet   = tortoise_require('engine/core/linkset');
var Nobody    = tortoise_require('engine/core/nobody');
var PatchSet  = tortoise_require('engine/core/patchset');
var Turtle    = tortoise_require('engine/core/turtle');
var TurtleSet = tortoise_require('engine/core/turtleset');
var Tasks     = tortoise_require('engine/prim/tasks');

var AgentModel = tortoise_require('agentmodel');
var Random     = tortoise_require('shim/random');
var StrictMath = tortoise_require('shim/strictmath');
function setup() {

}
function startup() {
  world.observer.setGlobal('delay-time', 10);
  world.observer.setGlobal('timestep', 0);
  world.observer.setGlobal('star-diameter', 20);
  Call(reset);
}
function calcLight() {
  if (Prims.gt(world.observer.getGlobal('planet-diameter'), 2.4)) {
    world.turtleManager.getTurtleOfBreed("PLANETS", 3).ask(function() {
      SelfPrims.setVariable('hidden?', true);
    }, true);
    world.turtleManager.getTurtleOfBreed("PLANETS", 4).ask(function() {
      SelfPrims.setVariable('hidden?', true);
    }, true);
  }
  else {
    world.turtleManager.getTurtleOfBreed("PLANETS", 3).ask(function() {
      SelfPrims.setVariable('hidden?', false);
    }, true);
    world.turtleManager.getTurtleOfBreed("PLANETS", 4).ask(function() {
      SelfPrims.setVariable('hidden?', false);
    }, true);
  }
  world.turtleManager.getTurtleOfBreed("PLANETS", 1).ask(function() {
    SelfPrims.setVariable('size', ((world.observer.getGlobal('planet-diameter') * world.observer.getGlobal('star-diameter')) / 109));
  }, true);
  if (MousePrims.isDown()) {
    world.turtleManager.getTurtleOfBreed("PLANETS", 1).ask(function() {
      SelfPrims.setVariable('xcor', MousePrims.getX());
      SelfPrims.setVariable('ycor', MousePrims.getY());
    }, true);
    var labelX = (world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
      return SelfPrims.getVariable('xcor');
    }) - 6);
    if ((Prims.lt(labelX, world.topology.minPxcor) || Prims.gt(labelX, world.topology.maxPxcor))) {
      labelX = world.turtleManager.getTurtleOfBreed("PLANETS", 2).projectionBy(function() {
        return SelfPrims.getVariable('xcor');
      });
    }
    var labelY = world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
      return SelfPrims.getVariable('ycor');
    });
    if ((Prims.lt(labelY, world.topology.minPycor) || Prims.gt(labelY, world.topology.maxPycor))) {
      labelY = world.turtleManager.getTurtleOfBreed("PLANETS", 2).projectionBy(function() {
        return SelfPrims.getVariable('ycor');
      });
    }
    world.turtleManager.getTurtleOfBreed("PLANETS", 2).ask(function() {
      SelfPrims.setVariable('xcor', labelX);
      SelfPrims.setVariable('ycor', labelY);
    }, true);
  }
  var dist = StrictMath.sqrt((StrictMath.pow(StrictMath.abs((world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
    return SelfPrims.getVariable('xcor');
  }) - world.turtleManager.getTurtleOfBreed("SUNS", 0).projectionBy(function() {
    return SelfPrims.getVariable('xcor');
  }))), 2) + StrictMath.pow(StrictMath.abs((world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
    return SelfPrims.getVariable('ycor');
  }) - world.turtleManager.getTurtleOfBreed("SUNS", 0).projectionBy(function() {
    return SelfPrims.getVariable('ycor');
  }))), 2)));
  var pRad = (world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
    return SelfPrims.getVariable('size');
  }) / 2);
  var sRad = (world.turtleManager.getTurtleOfBreed("SUNS", 0).projectionBy(function() {
    return SelfPrims.getVariable('size');
  }) / 2);
  var brightness = 1;
  var percentOverlap = 1;
  if (Prims.lt(dist, (pRad + sRad))) {
    if (Prims.gt(dist, (sRad - pRad))) {
      var areaOfOverlap = (((StrictMath.pow(pRad, 2) * ((Call(myAcos, (((StrictMath.pow(dist, 2) + StrictMath.pow(pRad, 2)) - StrictMath.pow(sRad, 2)) / ((2 * dist) * pRad))) * 3.141592653589793) / 180)) + (StrictMath.pow(sRad, 2) * ((Call(myAcos, (((StrictMath.pow(dist, 2) + StrictMath.pow(sRad, 2)) - StrictMath.pow(pRad, 2)) / ((2 * dist) * sRad))) * 3.141592653589793) / 180))) - (0.5 * StrictMath.sqrt(((((((-1 * dist) + pRad) + sRad) * ((dist + pRad) - sRad)) * ((dist - pRad) + sRad)) * ((dist + pRad) + sRad)))));
      var areaOfPlanet = (3.141592653589793 * StrictMath.pow((world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
        return SelfPrims.getVariable('size');
      }) / 2), 2));
      percentOverlap = (areaOfOverlap / areaOfPlanet);
    }
    brightness = (1 - (StrictMath.pow((world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
      return SelfPrims.getVariable('size');
    }) / world.turtleManager.getTurtleOfBreed("SUNS", 0).projectionBy(function() {
      return SelfPrims.getVariable('size');
    })), 2) * percentOverlap));
  }
  plotManager.plotPoint(world.observer.getGlobal('timestep'), brightness);
  world.observer.setGlobal('timestep', (world.observer.getGlobal('timestep') + 1));
  if (Prims.lt(world.observer.getGlobal('timestep'), world.observer.getGlobal('graph-time-window'))) {
    plotManager.setXRange(0, world.observer.getGlobal('graph-time-window'));
  }
  else {
    plotManager.setXRange((world.observer.getGlobal('timestep') - world.observer.getGlobal('graph-time-window')), world.observer.getGlobal('timestep'));
  }
  plotManager.setYRange((world.observer.getGlobal('magnify-y-range') / 100), 1);
}
function myAcos(x) {

}
function reset() {
  world.turtleManager.clearTurtles();
  world.observer.setGlobal('timestep', 0);
  world.observer.setGlobal('graph-time-window', 500);
  plotManager.clearPlot();
  world.turtleManager.createTurtles(1, 'SUNS').ask(function() {
    SelfPrims.setVariable('shape', "circle");
    SelfPrims.setVariable('size', world.observer.getGlobal('star-diameter'));
    SelfPrims.setVariable('color', [255, 255, 0, 175]);
    SelfPrims.setVariable('label', "star");
    SelfPrims.setVariable('label-color', 45);
  }, true);
  world.turtleManager.createTurtles(1, 'PLANETS').ask(function() {
    SelfPrims.setVariable('shape', "circle 2");
    SelfPrims.setVariable('size', ((world.observer.getGlobal('planet-diameter') * world.observer.getGlobal('star-diameter')) / 109));
    SelfPrims.setVariable('color', 45);
    SelfPrims.setVariable('xcor', -20);
    SelfPrims.setVariable('ycor', -9);
  }, true);
  world.turtleManager.createTurtles(1, 'PLANETS').ask(function() {
    SelfPrims.setVariable('label', "planet");
    SelfPrims.setVariable('label-color', 15);
    SelfPrims.setVariable('color', [0, 0, 0, 0]);
    SelfPrims.setVariable('xcor', (world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
      return SelfPrims.getVariable('xcor');
    }) - 7));
    SelfPrims.setVariable('ycor', world.turtleManager.getTurtleOfBreed("PLANETS", 1).projectionBy(function() {
      return SelfPrims.getVariable('ycor');
    }));
  }, true);
  world.turtleManager.getTurtleOfBreed("PLANETS", 2).ask(function() {
    LinkPrims.createLinkTo(world.turtleManager.getTurtleOfBreed("PLANETS", 1), 'ARROWS').ask(function() {
      SelfPrims.setVariable('color', 15);
    }, true);
  }, true);
  world.turtleManager.createTurtles(1, 'PLANETS').ask(function() {
    SelfPrims.setVariable('label', "planet too small to see at this scale");
    SelfPrims.setVariable('hidden?', true);
    SelfPrims.setVariable('xcor', 13);
    SelfPrims.setVariable('ycor', (world.topology.minPycor + 4));
  }, true);
  world.turtleManager.createTurtles(1, 'PLANETS').ask(function() {
    SelfPrims.setVariable('label', "try magnifying the y-axis");
    SelfPrims.setVariable('hidden?', true);
    SelfPrims.setVariable('xcor', 9);
    SelfPrims.setVariable('ycor', (world.topology.minPycor + 2));
  }, true);
}
function resetGraph() {
  plotManager.clearPlot();
  plotManager.setXRange(0, world.observer.getGlobal('graph-time-window'));
  world.observer.setGlobal('timestep', 0);
}
world.observer.setGlobal('graph-time-window', 500);
world.observer.setGlobal('planet-diameter', 16);
world.observer.setGlobal('magnify-y-range', 37);
      session.startLoop()

function myAcos(x) {
  return Math.acos(x) * 180 / Math.PI;
}
    </script>
  </body>
</html>
